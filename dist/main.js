/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=32,u=128,l=1/0,h=9007199254740991,f=NaN,d=4294967295,p=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",c],["partialRight",64],["rearg",256]],_="[object Arguments]",g="[object Array]",m="[object Boolean]",v="[object Date]",y="[object Error]",w="[object Function]",b="[object GeneratorFunction]",C="[object Map]",I="[object Number]",T="[object Object]",S="[object Promise]",E="[object RegExp]",k="[object Set]",N="[object String]",R="[object Symbol]",x="[object WeakMap]",D="[object ArrayBuffer]",P="[object DataView]",A="[object Float32Array]",O="[object Float64Array]",L="[object Int8Array]",M="[object Int16Array]",F="[object Int32Array]",j="[object Uint8Array]",$="[object Uint8ClampedArray]",W="[object Uint16Array]",B="[object Uint32Array]",q=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,K=RegExp(H.source),G=RegExp(V.source),Y=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,_t=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yt=/($^)/,wt=/['\n\r\u2028\u2029\\]/g,bt="\\ud800-\\udfff",Ct="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",It="\\u2700-\\u27bf",Tt="a-z\\xdf-\\xf6\\xf8-\\xff",St="A-Z\\xc0-\\xd6\\xd8-\\xde",Et="\\ufe0e\\ufe0f",kt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nt="["+bt+"]",Rt="["+kt+"]",xt="["+Ct+"]",Dt="\\d+",Pt="["+It+"]",At="["+Tt+"]",Ot="[^"+bt+kt+Dt+It+Tt+St+"]",Lt="\\ud83c[\\udffb-\\udfff]",Mt="[^"+bt+"]",Ft="(?:\\ud83c[\\udde6-\\uddff]){2}",jt="[\\ud800-\\udbff][\\udc00-\\udfff]",$t="["+St+"]",Wt="\\u200d",Bt="(?:"+At+"|"+Ot+")",qt="(?:"+$t+"|"+Ot+")",Ut="(?:['’](?:d|ll|m|re|s|t|ve))?",zt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ht="(?:"+xt+"|"+Lt+")?",Vt="["+Et+"]?",Kt=Vt+Ht+"(?:"+Wt+"(?:"+[Mt,Ft,jt].join("|")+")"+Vt+Ht+")*",Gt="(?:"+[Pt,Ft,jt].join("|")+")"+Kt,Yt="(?:"+[Mt+xt+"?",xt,Ft,jt,Nt].join("|")+")",Qt=RegExp("['’]","g"),Jt=RegExp(xt,"g"),Zt=RegExp(Lt+"(?="+Lt+")|"+Yt+Kt,"g"),Xt=RegExp([$t+"?"+At+"+"+Ut+"(?="+[Rt,$t,"$"].join("|")+")",qt+"+"+zt+"(?="+[Rt,$t+Bt,"$"].join("|")+")",$t+"?"+Bt+"+"+Ut,$t+"+"+zt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dt,Gt].join("|"),"g"),te=RegExp("["+Wt+bt+Ct+Et+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[A]=ie[O]=ie[L]=ie[M]=ie[F]=ie[j]=ie[$]=ie[W]=ie[B]=!0,ie[_]=ie[g]=ie[D]=ie[m]=ie[P]=ie[v]=ie[y]=ie[w]=ie[C]=ie[I]=ie[T]=ie[E]=ie[k]=ie[N]=ie[x]=!1;var oe={};oe[_]=oe[g]=oe[D]=oe[P]=oe[m]=oe[v]=oe[A]=oe[O]=oe[L]=oe[M]=oe[F]=oe[C]=oe[I]=oe[T]=oe[E]=oe[k]=oe[N]=oe[R]=oe[j]=oe[$]=oe[W]=oe[B]=!0,oe[y]=oe[w]=oe[x]=!1;var se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ae=parseFloat,ce=parseInt,ue="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,le="object"==typeof self&&self&&self.Object===Object&&self,he=ue||le||Function("return this")(),fe=e&&!e.nodeType&&e,de=fe&&t&&!t.nodeType&&t,pe=de&&de.exports===fe,_e=pe&&ue.process,ge=function(){try{return de&&de.require&&de.require("util").types||_e&&_e.binding&&_e.binding("util")}catch(t){}}(),me=ge&&ge.isArrayBuffer,ve=ge&&ge.isDate,ye=ge&&ge.isMap,we=ge&&ge.isRegExp,be=ge&&ge.isSet,Ce=ge&&ge.isTypedArray;function Ie(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Te(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function Se(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ee(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ne(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Re(t,e){return!(null==t||!t.length)&&$e(t,e,0)>-1}function xe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function De(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Pe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Ae(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Oe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Le(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Me=Ue("length");function Fe(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function je(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function $e(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):je(t,Be,n)}function We(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Be(t){return t!=t}function qe(t,e){var n=null==t?0:t.length;return n?Ve(t,e)/n:f}function Ue(t){return function(e){return null==e?i:e[t]}}function ze(t){return function(e){return null==t?i:t[e]}}function He(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ve(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function Ke(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ge(t){return t?t.slice(0,fn(t)+1).replace(rt,""):t}function Ye(t){return function(e){return t(e)}}function Qe(t,e){return De(e,(function(e){return t[e]}))}function Je(t,e){return t.has(e)}function Ze(t,e){for(var n=-1,r=t.length;++n<r&&$e(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length;n--&&$e(e,t[n],0)>-1;);return n}var tn=ze({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),en=ze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+se[t]}function rn(t){return te.test(t)}function on(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function sn(t,e){return function(n){return t(e(n))}}function an(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function ln(t){return rn(t)?function(t){for(var e=Zt.lastIndex=0;Zt.test(t);)++e;return e}(t):Me(t)}function hn(t){return rn(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.split("")}(t)}function fn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var dn=ze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pn=function t(e){var n,r=(e=null==e?he:pn.defaults(he.Object(),e,pn.pick(he,ne))).Array,it=e.Date,bt=e.Error,Ct=e.Function,It=e.Math,Tt=e.Object,St=e.RegExp,Et=e.String,kt=e.TypeError,Nt=r.prototype,Rt=Ct.prototype,xt=Tt.prototype,Dt=e["__core-js_shared__"],Pt=Rt.toString,At=xt.hasOwnProperty,Ot=0,Lt=(n=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Mt=xt.toString,Ft=Pt.call(Tt),jt=he._,$t=St("^"+Pt.call(At).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=pe?e.Buffer:i,Bt=e.Symbol,qt=e.Uint8Array,Ut=Wt?Wt.allocUnsafe:i,zt=sn(Tt.getPrototypeOf,Tt),Ht=Tt.create,Vt=xt.propertyIsEnumerable,Kt=Nt.splice,Gt=Bt?Bt.isConcatSpreadable:i,Yt=Bt?Bt.iterator:i,Zt=Bt?Bt.toStringTag:i,te=function(){try{var t=co(Tt,"defineProperty");return t({},"",{}),t}catch(t){}}(),se=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,ue=it&&it.now!==he.Date.now&&it.now,le=e.setTimeout!==he.setTimeout&&e.setTimeout,fe=It.ceil,de=It.floor,_e=Tt.getOwnPropertySymbols,ge=Wt?Wt.isBuffer:i,Me=e.isFinite,ze=Nt.join,_n=sn(Tt.keys,Tt),gn=It.max,mn=It.min,vn=it.now,yn=e.parseInt,wn=It.random,bn=Nt.reverse,Cn=co(e,"DataView"),In=co(e,"Map"),Tn=co(e,"Promise"),Sn=co(e,"Set"),En=co(e,"WeakMap"),kn=co(Tt,"create"),Nn=En&&new En,Rn={},xn=Fo(Cn),Dn=Fo(In),Pn=Fo(Tn),An=Fo(Sn),On=Fo(En),Ln=Bt?Bt.prototype:i,Mn=Ln?Ln.valueOf:i,Fn=Ln?Ln.toString:i;function jn(t){if(ta(t)&&!Us(t)&&!(t instanceof qn)){if(t instanceof Bn)return t;if(At.call(t,"__wrapped__"))return jo(t)}return new Bn(t)}var $n=function(){function t(){}return function(e){if(!Xs(e))return{};if(Ht)return Ht(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Wn(){}function Bn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function qn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Hn;++e<n;)this.add(t[e])}function Kn(t){var e=this.__data__=new zn(t);this.size=e.size}function Gn(t,e){var n=Us(t),r=!n&&qs(t),i=!n&&!r&&Ks(t),o=!n&&!r&&!i&&ca(t),s=n||r||i||o,a=s?Ke(t.length,Et):[],c=a.length;for(var u in t)!e&&!At.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||go(u,c))||a.push(u);return a}function Yn(t){var e=t.length;return e?t[Hr(0,e-1)]:i}function Qn(t,e){return Po(Ei(t),or(e,0,t.length))}function Jn(t){return Po(Ei(t))}function Zn(t,e,n){(n!==i&&!$s(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Xn(t,e,n){var r=t[e];At.call(t,e)&&$s(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if($s(t[n][0],e))return n;return-1}function er(t,e,n,r){return lr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function nr(t,e){return t&&ki(e,xa(e),t)}function rr(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:Sa(t,e[n]);return s}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function sr(t,e,n,r,o,s){var a,c=1&e,u=2&e,l=4&e;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!Xs(t))return t;var h=Us(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&At.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!c)return Ei(t,a)}else{var f=ho(t),d=f==w||f==b;if(Ks(t))return wi(t,c);if(f==T||f==_||d&&!o){if(a=u||d?{}:po(t),!c)return u?function(t,e){return ki(t,lo(t),e)}(t,function(t,e){return t&&ki(e,Da(e),t)}(a,t)):function(t,e){return ki(t,uo(t),e)}(t,nr(a,t))}else{if(!oe[f])return o?t:{};a=function(t,e,n){var r,i=t.constructor;switch(e){case D:return bi(t);case m:case v:return new i(+t);case P:return function(t,e){var n=e?bi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case A:case O:case L:case M:case F:case j:case $:case W:case B:return Ci(t,n);case C:return new i;case I:case N:return new i(t);case E:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case k:return new i;case R:return r=t,Mn?Tt(Mn.call(r)):{}}}(t,f,c)}}s||(s=new Kn);var p=s.get(t);if(p)return p;s.set(t,a),oa(t)?t.forEach((function(r){a.add(sr(r,e,n,r,t,s))})):ea(t)&&t.forEach((function(r,i){a.set(i,sr(r,e,n,i,t,s))}));var g=h?i:(l?u?eo:to:u?Da:xa)(t);return Se(g||t,(function(r,i){g&&(r=t[i=r]),Xn(a,i,sr(r,e,n,i,t,s))})),a}function ar(t,e,n){var r=n.length;if(null==t)return!r;for(t=Tt(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function cr(t,e,n){if("function"!=typeof t)throw new kt(o);return No((function(){t.apply(i,n)}),e)}function ur(t,e,n,r){var i=-1,o=Re,s=!0,a=t.length,c=[],u=e.length;if(!a)return c;n&&(e=De(e,Ye(n))),r?(o=xe,s=!1):e.length>=200&&(o=Je,s=!1,e=new Vn(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,s&&h==h){for(var f=u;f--;)if(e[f]===h)continue t;c.push(l)}else o(e,h,r)||c.push(l)}return c}jn.templateSettings={escape:Y,evaluate:Q,interpolate:J,variable:"",imports:{_:jn}},jn.prototype=Wn.prototype,jn.prototype.constructor=jn,Bn.prototype=$n(Wn.prototype),Bn.prototype.constructor=Bn,qn.prototype=$n(Wn.prototype),qn.prototype.constructor=qn,Un.prototype.clear=function(){this.__data__=kn?kn(null):{},this.size=0},Un.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Un.prototype.get=function(t){var e=this.__data__;if(kn){var n=e[t];return n===s?i:n}return At.call(e,t)?e[t]:i},Un.prototype.has=function(t){var e=this.__data__;return kn?e[t]!==i:At.call(e,t)},Un.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=kn&&e===i?s:e,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():Kt.call(e,n,1),--this.size,0))},zn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},zn.prototype.has=function(t){return tr(this.__data__,t)>-1},zn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new Un,map:new(In||zn),string:new Un}},Hn.prototype.delete=function(t){var e=so(this,t).delete(t);return this.size-=e?1:0,e},Hn.prototype.get=function(t){return so(this,t).get(t)},Hn.prototype.has=function(t){return so(this,t).has(t)},Hn.prototype.set=function(t,e){var n=so(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Vn.prototype.add=Vn.prototype.push=function(t){return this.__data__.set(t,s),this},Vn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.clear=function(){this.__data__=new zn,this.size=0},Kn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Kn.prototype.get=function(t){return this.__data__.get(t)},Kn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof zn){var r=n.__data__;if(!In||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hn(r)}return n.set(t,e),this.size=n.size,this};var lr=xi(vr),hr=xi(yr,!0);function fr(t,e){var n=!0;return lr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function dr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(c===i?a==a&&!aa(a):n(a,c)))var c=a,u=s}return u}function pr(t,e){var n=[];return lr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function _r(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=_o),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?_r(a,e-1,n,r,i):Pe(i,a):r||(i[i.length]=a)}return i}var gr=Di(),mr=Di(!0);function vr(t,e){return t&&gr(t,e,xa)}function yr(t,e){return t&&mr(t,e,xa)}function wr(t,e){return Ne(e,(function(e){return Qs(t[e])}))}function br(t,e){for(var n=0,r=(e=gi(e,t)).length;null!=t&&n<r;)t=t[Mo(e[n++])];return n&&n==r?t:i}function Cr(t,e,n){var r=e(t);return Us(t)?r:Pe(r,n(t))}function Ir(t){return null==t?t===i?"[object Undefined]":"[object Null]":Zt&&Zt in Tt(t)?function(t){var e=At.call(t,Zt),n=t[Zt];try{t[Zt]=i;var r=!0}catch(t){}var o=Mt.call(t);return r&&(e?t[Zt]=n:delete t[Zt]),o}(t):function(t){return Mt.call(t)}(t)}function Tr(t,e){return t>e}function Sr(t,e){return null!=t&&At.call(t,e)}function Er(t,e){return null!=t&&e in Tt(t)}function kr(t,e,n){for(var o=n?xe:Re,s=t[0].length,a=t.length,c=a,u=r(a),l=1/0,h=[];c--;){var f=t[c];c&&e&&(f=De(f,Ye(e))),l=mn(f.length,l),u[c]=!n&&(e||s>=120&&f.length>=120)?new Vn(c&&f):i}f=t[0];var d=-1,p=u[0];t:for(;++d<s&&h.length<l;){var _=f[d],g=e?e(_):_;if(_=n||0!==_?_:0,!(p?Je(p,g):o(h,g,n))){for(c=a;--c;){var m=u[c];if(!(m?Je(m,g):o(t[c],g,n)))continue t}p&&p.push(g),h.push(_)}}return h}function Nr(t,e,n){var r=null==(t=So(t,e=gi(e,t)))?t:t[Mo(Yo(e))];return null==r?i:Ie(r,t,n)}function Rr(t){return ta(t)&&Ir(t)==_}function xr(t,e,n,r,o){return t===e||(null==t||null==e||!ta(t)&&!ta(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=Us(t),c=Us(e),u=a?g:ho(t),l=c?g:ho(e),h=(u=u==_?T:u)==T,f=(l=l==_?T:l)==T,d=u==l;if(d&&Ks(t)){if(!Ks(e))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new Kn),a||ca(t)?Zi(t,e,n,r,o,s):function(t,e,n,r,i,o,s){switch(n){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case D:return!(t.byteLength!=e.byteLength||!o(new qt(t),new qt(e)));case m:case v:case I:return $s(+t,+e);case y:return t.name==e.name&&t.message==e.message;case E:case N:return t==e+"";case C:var a=on;case k:var c=1&r;if(a||(a=cn),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;r|=2,s.set(t,e);var l=Zi(a(t),a(e),r,i,o,s);return s.delete(t),l;case R:if(Mn)return Mn.call(t)==Mn.call(e)}return!1}(t,e,u,n,r,o,s);if(!(1&n)){var p=h&&At.call(t,"__wrapped__"),w=f&&At.call(e,"__wrapped__");if(p||w){var b=p?t.value():t,S=w?e.value():e;return s||(s=new Kn),o(b,S,n,r,s)}}return!!d&&(s||(s=new Kn),function(t,e,n,r,o,s){var a=1&n,c=to(t),u=c.length;if(u!=to(e).length&&!a)return!1;for(var l=u;l--;){var h=c[l];if(!(a?h in e:At.call(e,h)))return!1}var f=s.get(t),d=s.get(e);if(f&&d)return f==e&&d==t;var p=!0;s.set(t,e),s.set(e,t);for(var _=a;++l<u;){var g=t[h=c[l]],m=e[h];if(r)var v=a?r(m,g,h,e,t,s):r(g,m,h,t,e,s);if(!(v===i?g===m||o(g,m,n,r,s):v)){p=!1;break}_||(_="constructor"==h)}if(p&&!_){var y=t.constructor,w=e.constructor;y==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,r,o,s))}(t,e,n,r,xr,o))}function Dr(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=Tt(t);o--;){var c=n[o];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<s;){var u=(c=n[o])[0],l=t[u],h=c[1];if(a&&c[2]){if(l===i&&!(u in t))return!1}else{var f=new Kn;if(r)var d=r(l,h,u,t,e,f);if(!(d===i?xr(h,l,3,r,f):d))return!1}}return!0}function Pr(t){return!(!Xs(t)||(e=t,Lt&&Lt in e))&&(Qs(t)?$t:_t).test(Fo(t));var e}function Ar(t){return"function"==typeof t?t:null==t?nc:"object"==typeof t?Us(t)?jr(t[0],t[1]):Fr(t):hc(t)}function Or(t){if(!bo(t))return _n(t);var e=[];for(var n in Tt(t))At.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Lr(t,e){return t<e}function Mr(t,e){var n=-1,i=Hs(t)?r(t.length):[];return lr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Fr(t){var e=ao(t);return 1==e.length&&e[0][2]?Io(e[0][0],e[0][1]):function(n){return n===t||Dr(n,t,e)}}function jr(t,e){return vo(t)&&Co(e)?Io(Mo(t),e):function(n){var r=Sa(n,t);return r===i&&r===e?Ea(n,t):xr(e,r,3)}}function $r(t,e,n,r,o){t!==e&&gr(e,(function(s,a){if(o||(o=new Kn),Xs(s))!function(t,e,n,r,o,s,a){var c=Eo(t,n),u=Eo(e,n),l=a.get(u);if(l)Zn(t,n,l);else{var h=s?s(c,u,n+"",t,e,a):i,f=h===i;if(f){var d=Us(u),p=!d&&Ks(u),_=!d&&!p&&ca(u);h=u,d||p||_?Us(c)?h=c:Vs(c)?h=Ei(c):p?(f=!1,h=wi(u,!0)):_?(f=!1,h=Ci(u,!0)):h=[]:ra(u)||qs(u)?(h=c,qs(c)?h=ga(c):Xs(c)&&!Qs(c)||(h=po(u))):f=!1}f&&(a.set(u,h),o(h,u,r,s,a),a.delete(u)),Zn(t,n,h)}}(t,e,a,n,$r,r,o);else{var c=r?r(Eo(t,a),s,a+"",t,e,o):i;c===i&&(c=s),Zn(t,a,c)}}),Da)}function Wr(t,e){var n=t.length;if(n)return go(e+=e<0?n:0,n)?t[e]:i}function Br(t,e,n){e=e.length?De(e,(function(t){return Us(t)?function(e){return br(e,1===t.length?t[0]:t)}:t})):[nc];var r=-1;e=De(e,Ye(oo()));var i=Mr(t,(function(t,n,i){var o=De(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var c=Ii(i[r],o[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function qr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=br(t,s);n(a,s)&&Qr(o,gi(s,t),a)}return o}function Ur(t,e,n,r){var i=r?We:$e,o=-1,s=e.length,a=t;for(t===e&&(e=Ei(e)),n&&(a=De(t,Ye(n)));++o<s;)for(var c=0,u=e[o],l=n?n(u):u;(c=i(a,l,c,r))>-1;)a!==t&&Kt.call(a,c,1),Kt.call(t,c,1);return t}function zr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;go(i)?Kt.call(t,i,1):ci(t,i)}}return t}function Hr(t,e){return t+de(wn()*(e-t+1))}function Vr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=de(e/2))&&(t+=t)}while(e);return n}function Kr(t,e){return Ro(To(t,e,nc),t+"")}function Gr(t){return Yn($a(t))}function Yr(t,e){var n=$a(t);return Po(n,or(e,0,n.length))}function Qr(t,e,n,r){if(!Xs(t))return t;for(var o=-1,s=(e=gi(e,t)).length,a=s-1,c=t;null!=c&&++o<s;){var u=Mo(e[o]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var h=c[u];(l=r?r(h,u,c):i)===i&&(l=Xs(h)?h:go(e[o+1])?[]:{})}Xn(c,u,l),c=c[u]}return t}var Jr=Nn?function(t,e){return Nn.set(t,e),t}:nc,Zr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Xa(e),writable:!0})}:nc;function Xr(t){return Po($a(t))}function ti(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function ei(t,e){var n;return lr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!aa(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ri(t,e,nc,n)}function ri(t,e,n,r){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,c=null===e,u=aa(e),l=e===i;o<s;){var h=de((o+s)/2),f=n(t[h]),d=f!==i,p=null===f,_=f==f,g=aa(f);if(a)var m=r||_;else m=l?_&&(r||d):c?_&&d&&(r||!p):u?_&&d&&!p&&(r||!g):!p&&!g&&(r?f<=e:f<e);m?o=h+1:s=h}return mn(s,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!$s(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function oi(t){return"number"==typeof t?t:aa(t)?f:+t}function si(t){if("string"==typeof t)return t;if(Us(t))return De(t,si)+"";if(aa(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ai(t,e,n){var r=-1,i=Re,o=t.length,s=!0,a=[],c=a;if(n)s=!1,i=xe;else if(o>=200){var u=e?null:Vi(t);if(u)return cn(u);s=!1,i=Je,c=new Vn}else c=e?[]:a;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,s&&h==h){for(var f=c.length;f--;)if(c[f]===h)continue t;e&&c.push(h),a.push(l)}else i(c,h,n)||(c!==a&&c.push(h),a.push(l))}return a}function ci(t,e){return null==(t=So(t,e=gi(e,t)))||delete t[Mo(Yo(e))]}function ui(t,e,n,r){return Qr(t,e,n(br(t,e)),r)}function li(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ti(t,r?0:o,r?o+1:i):ti(t,r?o+1:0,r?i:o)}function hi(t,e){var n=t;return n instanceof qn&&(n=n.value()),Ae(e,(function(t,e){return e.func.apply(e.thisArg,Pe([t],e.args))}),n)}function fi(t,e,n){var i=t.length;if(i<2)return i?ai(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],c=-1;++c<i;)c!=o&&(s[o]=ur(s[o]||a,t[c],e,n));return ai(_r(s,1),e,n)}function di(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var c=r<s?e[r]:i;n(a,t[r],c)}return a}function pi(t){return Vs(t)?t:[]}function _i(t){return"function"==typeof t?t:nc}function gi(t,e){return Us(t)?t:vo(t,e)?[t]:Lo(ma(t))}var mi=Kr;function vi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var yi=se||function(t){return he.clearTimeout(t)};function wi(t,e){if(e)return t.slice();var n=t.length,r=Ut?Ut(n):new t.constructor(n);return t.copy(r),r}function bi(t){var e=new t.constructor(t.byteLength);return new qt(e).set(new qt(t)),e}function Ci(t,e){var n=e?bi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ii(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=aa(t),a=e!==i,c=null===e,u=e==e,l=aa(e);if(!c&&!l&&!s&&t>e||s&&a&&u&&!c&&!l||r&&a&&u||!n&&u||!o)return 1;if(!r&&!s&&!l&&t<e||l&&n&&o&&!r&&!s||c&&n&&o||!a&&o||!u)return-1}return 0}function Ti(t,e,n,i){for(var o=-1,s=t.length,a=n.length,c=-1,u=e.length,l=gn(s-a,0),h=r(u+l),f=!i;++c<u;)h[c]=e[c];for(;++o<a;)(f||o<s)&&(h[n[o]]=t[o]);for(;l--;)h[c++]=t[o++];return h}function Si(t,e,n,i){for(var o=-1,s=t.length,a=-1,c=n.length,u=-1,l=e.length,h=gn(s-c,0),f=r(h+l),d=!i;++o<h;)f[o]=t[o];for(var p=o;++u<l;)f[p+u]=e[u];for(;++a<c;)(d||o<s)&&(f[p+n[a]]=t[o++]);return f}function Ei(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function ki(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var c=e[s],u=r?r(n[c],t[c],c,n,t):i;u===i&&(u=t[c]),o?rr(n,c,u):Xn(n,c,u)}return n}function Ni(t,e){return function(n,r){var i=Us(n)?Te:er,o=e?e():{};return i(n,t,oo(r,2),o)}}function Ri(t){return Kr((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&mo(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=Tt(e);++r<o;){var c=n[r];c&&t(e,c,r,s)}return e}))}function xi(t,e){return function(n,r){if(null==n)return n;if(!Hs(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Tt(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Di(t){return function(e,n,r){for(var i=-1,o=Tt(e),s=r(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}function Pi(t){return function(e){var n=rn(e=ma(e))?hn(e):i,r=n?n[0]:e.charAt(0),o=n?vi(n,1).join(""):e.slice(1);return r[t]()+o}}function Ai(t){return function(e){return Ae(Qa(qa(e).replace(Qt,"")),t,"")}}function Oi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=$n(t.prototype),r=t.apply(n,e);return Xs(r)?r:n}}function Li(t){return function(e,n,r){var o=Tt(e);if(!Hs(e)){var s=oo(n,3);e=xa(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function Mi(t){return Xi((function(e){var n=e.length,r=n,s=Bn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new kt(o);if(s&&!c&&"wrapper"==ro(a))var c=new Bn([],!0)}for(r=c?r:n;++r<n;){var u=ro(a=e[r]),l="wrapper"==u?no(a):i;c=l&&yo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[ro(l[0])].apply(c,l[3]):1==a.length&&yo(a)?c[u]():c.thru(a)}return function(){var t=arguments,r=t[0];if(c&&1==t.length&&Us(r))return c.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Fi(t,e,n,o,s,a,c,l,h,f){var d=e&u,p=1&e,_=2&e,g=24&e,m=512&e,v=_?i:Oi(t);return function u(){for(var y=arguments.length,w=r(y),b=y;b--;)w[b]=arguments[b];if(g)var C=io(u),I=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(w,C);if(o&&(w=Ti(w,o,s,g)),a&&(w=Si(w,a,c,g)),y-=I,g&&y<f){var T=an(w,C);return zi(t,e,Fi,u.placeholder,n,w,T,l,h,f-y)}var S=p?n:this,E=_?S[t]:t;return y=w.length,l?w=function(t,e){for(var n=t.length,r=mn(e.length,n),o=Ei(t);r--;){var s=e[r];t[r]=go(s,n)?o[s]:i}return t}(w,l):m&&y>1&&w.reverse(),d&&h<y&&(w.length=h),this&&this!==he&&this instanceof u&&(E=v||Oi(E)),E.apply(S,w)}}function ji(t,e){return function(n,r){return function(t,e,n,r){return vr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function $i(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=si(n),r=si(r)):(n=oi(n),r=oi(r)),o=t(n,r)}return o}}function Wi(t){return Xi((function(e){return e=De(e,Ye(oo())),Kr((function(n){var r=this;return t(e,(function(t){return Ie(t,r,n)}))}))}))}function Bi(t,e){var n=(e=e===i?" ":si(e)).length;if(n<2)return n?Vr(e,t):e;var r=Vr(e,fe(t/ln(e)));return rn(e)?vi(hn(r),0,t).join(""):r.slice(0,t)}function qi(t){return function(e,n,o){return o&&"number"!=typeof o&&mo(e,n,o)&&(n=o=i),e=fa(e),n===i?(n=e,e=0):n=fa(n),function(t,e,n,i){for(var o=-1,s=gn(fe((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:fa(o),t)}}function Ui(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=_a(e),n=_a(n)),t(e,n)}}function zi(t,e,n,r,o,s,a,u,l,h){var f=8&e;e|=f?c:64,4&(e&=~(f?64:c))||(e&=-4);var d=[t,e,o,f?s:i,f?a:i,f?i:s,f?i:a,u,l,h],p=n.apply(i,d);return yo(t)&&ko(p,d),p.placeholder=r,xo(p,t,e)}function Hi(t){var e=It[t];return function(t,n){if(t=_a(t),(n=null==n?0:mn(da(n),292))&&Me(t)){var r=(ma(t)+"e").split("e");return+((r=(ma(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Vi=Sn&&1/cn(new Sn([,-0]))[1]==l?function(t){return new Sn(t)}:ac;function Ki(t){return function(e){var n=ho(e);return n==C?on(e):n==k?un(e):function(t,e){return De(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Gi(t,e,n,s,l,h,f,d){var p=2&e;if(!p&&"function"!=typeof t)throw new kt(o);var _=s?s.length:0;if(_||(e&=-97,s=l=i),f=f===i?f:gn(da(f),0),d=d===i?d:da(d),_-=l?l.length:0,64&e){var g=s,m=l;s=l=i}var v=p?i:no(t),y=[t,e,n,s,l,g,m,h,f,d];if(v&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==u&&8==n||r==u&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var c=e[3];if(c){var l=t[3];t[3]=l?Ti(l,c,e[4]):c,t[4]=l?an(t[3],a):e[4]}(c=e[5])&&(l=t[5],t[5]=l?Si(l,c,e[6]):c,t[6]=l?an(t[5],a):e[6]),(c=e[7])&&(t[7]=c),r&u&&(t[8]=null==t[8]?e[8]:mn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(y,v),t=y[0],e=y[1],n=y[2],s=y[3],l=y[4],!(d=y[9]=y[9]===i?p?0:t.length:gn(y[9]-_,0))&&24&e&&(e&=-25),e&&1!=e)w=8==e||16==e?function(t,e,n){var o=Oi(t);return function s(){for(var a=arguments.length,c=r(a),u=a,l=io(s);u--;)c[u]=arguments[u];var h=a<3&&c[0]!==l&&c[a-1]!==l?[]:an(c,l);return(a-=h.length)<n?zi(t,e,Fi,s.placeholder,i,c,h,i,i,n-a):Ie(this&&this!==he&&this instanceof s?o:t,this,c)}}(t,e,d):e!=c&&33!=e||l.length?Fi.apply(i,y):function(t,e,n,i){var o=1&e,s=Oi(t);return function e(){for(var a=-1,c=arguments.length,u=-1,l=i.length,h=r(l+c),f=this&&this!==he&&this instanceof e?s:t;++u<l;)h[u]=i[u];for(;c--;)h[u++]=arguments[++a];return Ie(f,o?n:this,h)}}(t,e,n,s);else var w=function(t,e,n){var r=1&e,i=Oi(t);return function e(){return(this&&this!==he&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return xo((v?Jr:ko)(w,y),t,e)}function Yi(t,e,n,r){return t===i||$s(t,xt[n])&&!At.call(r,n)?e:t}function Qi(t,e,n,r,o,s){return Xs(t)&&Xs(e)&&(s.set(e,t),$r(t,e,i,Qi,s),s.delete(e)),t}function Ji(t){return ra(t)?i:t}function Zi(t,e,n,r,o,s){var a=1&n,c=t.length,u=e.length;if(c!=u&&!(a&&u>c))return!1;var l=s.get(t),h=s.get(e);if(l&&h)return l==e&&h==t;var f=-1,d=!0,p=2&n?new Vn:i;for(s.set(t,e),s.set(e,t);++f<c;){var _=t[f],g=e[f];if(r)var m=a?r(g,_,f,e,t,s):r(_,g,f,t,e,s);if(m!==i){if(m)continue;d=!1;break}if(p){if(!Le(e,(function(t,e){if(!Je(p,e)&&(_===t||o(_,t,n,r,s)))return p.push(e)}))){d=!1;break}}else if(_!==g&&!o(_,g,n,r,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function Xi(t){return Ro(To(t,i,zo),t+"")}function to(t){return Cr(t,xa,uo)}function eo(t){return Cr(t,Da,lo)}var no=Nn?function(t){return Nn.get(t)}:ac;function ro(t){for(var e=t.name+"",n=Rn[e],r=At.call(Rn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(At.call(jn,"placeholder")?jn:t).placeholder}function oo(){var t=jn.iteratee||rc;return t=t===rc?Ar:t,arguments.length?t(arguments[0],arguments[1]):t}function so(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function ao(t){for(var e=xa(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Co(i)]}return e}function co(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Pr(n)?n:i}var uo=_e?function(t){return null==t?[]:(t=Tt(t),Ne(_e(t),(function(e){return Vt.call(t,e)})))}:pc,lo=_e?function(t){for(var e=[];t;)Pe(e,uo(t)),t=zt(t);return e}:pc,ho=Ir;function fo(t,e,n){for(var r=-1,i=(e=gi(e,t)).length,o=!1;++r<i;){var s=Mo(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Zs(i)&&go(s,i)&&(Us(t)||qs(t))}function po(t){return"function"!=typeof t.constructor||bo(t)?{}:$n(zt(t))}function _o(t){return Us(t)||qs(t)||!!(Gt&&t&&t[Gt])}function go(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function mo(t,e,n){if(!Xs(n))return!1;var r=typeof e;return!!("number"==r?Hs(n)&&go(e,n.length):"string"==r&&e in n)&&$s(n[e],t)}function vo(t,e){if(Us(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!aa(t))||X.test(t)||!Z.test(t)||null!=e&&t in Tt(e)}function yo(t){var e=ro(t),n=jn[e];if("function"!=typeof n||!(e in qn.prototype))return!1;if(t===n)return!0;var r=no(n);return!!r&&t===r[0]}(Cn&&ho(new Cn(new ArrayBuffer(1)))!=P||In&&ho(new In)!=C||Tn&&ho(Tn.resolve())!=S||Sn&&ho(new Sn)!=k||En&&ho(new En)!=x)&&(ho=function(t){var e=Ir(t),n=e==T?t.constructor:i,r=n?Fo(n):"";if(r)switch(r){case xn:return P;case Dn:return C;case Pn:return S;case An:return k;case On:return x}return e});var wo=Dt?Qs:_c;function bo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||xt)}function Co(t){return t==t&&!Xs(t)}function Io(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Tt(n))}}function To(t,e,n){return e=gn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=gn(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var c=r(e+1);++o<e;)c[o]=i[o];return c[e]=n(a),Ie(t,this,c)}}function So(t,e){return e.length<2?t:br(t,ti(e,0,-1))}function Eo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ko=Do(Jr),No=le||function(t,e){return he.setTimeout(t,e)},Ro=Do(Zr);function xo(t,e,n){var r=e+"";return Ro(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Se(p,(function(n){var r="_."+n[0];e&n[1]&&!Re(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(r),n)))}function Do(t){var e=0,n=0;return function(){var r=vn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Po(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=Hr(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Ao,Oo,Lo=(Ao=As((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(lt,"$1"):n||t)})),e}),(function(t){return 500===Oo.size&&Oo.clear(),t})),Oo=Ao.cache,Ao);function Mo(t){if("string"==typeof t||aa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Fo(t){if(null!=t){try{return Pt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function jo(t){if(t instanceof qn)return t.clone();var e=new Bn(t.__wrapped__,t.__chain__);return e.__actions__=Ei(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var $o=Kr((function(t,e){return Vs(t)?ur(t,_r(e,1,Vs,!0)):[]})),Wo=Kr((function(t,e){var n=Yo(e);return Vs(n)&&(n=i),Vs(t)?ur(t,_r(e,1,Vs,!0),oo(n,2)):[]})),Bo=Kr((function(t,e){var n=Yo(e);return Vs(n)&&(n=i),Vs(t)?ur(t,_r(e,1,Vs,!0),i,n):[]}));function qo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:da(n);return i<0&&(i=gn(r+i,0)),je(t,oo(e,3),i)}function Uo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=da(n),o=n<0?gn(r+o,0):mn(o,r-1)),je(t,oo(e,3),o,!0)}function zo(t){return null!=t&&t.length?_r(t,1):[]}function Ho(t){return t&&t.length?t[0]:i}var Vo=Kr((function(t){var e=De(t,pi);return e.length&&e[0]===t[0]?kr(e):[]})),Ko=Kr((function(t){var e=Yo(t),n=De(t,pi);return e===Yo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?kr(n,oo(e,2)):[]})),Go=Kr((function(t){var e=Yo(t),n=De(t,pi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?kr(n,i,e):[]}));function Yo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Qo=Kr(Jo);function Jo(t,e){return t&&t.length&&e&&e.length?Ur(t,e):t}var Zo=Xi((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return zr(t,De(e,(function(t){return go(t,n)?+t:t})).sort(Ii)),r}));function Xo(t){return null==t?t:bn.call(t)}var ts=Kr((function(t){return ai(_r(t,1,Vs,!0))})),es=Kr((function(t){var e=Yo(t);return Vs(e)&&(e=i),ai(_r(t,1,Vs,!0),oo(e,2))})),ns=Kr((function(t){var e=Yo(t);return e="function"==typeof e?e:i,ai(_r(t,1,Vs,!0),i,e)}));function rs(t){if(!t||!t.length)return[];var e=0;return t=Ne(t,(function(t){if(Vs(t))return e=gn(t.length,e),!0})),Ke(e,(function(e){return De(t,Ue(e))}))}function is(t,e){if(!t||!t.length)return[];var n=rs(t);return null==e?n:De(n,(function(t){return Ie(e,i,t)}))}var os=Kr((function(t,e){return Vs(t)?ur(t,e):[]})),ss=Kr((function(t){return fi(Ne(t,Vs))})),as=Kr((function(t){var e=Yo(t);return Vs(e)&&(e=i),fi(Ne(t,Vs),oo(e,2))})),cs=Kr((function(t){var e=Yo(t);return e="function"==typeof e?e:i,fi(Ne(t,Vs),i,e)})),us=Kr(rs),ls=Kr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,is(t,n)}));function hs(t){var e=jn(t);return e.__chain__=!0,e}function fs(t,e){return e(t)}var ds=Xi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof qn&&go(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:fs,args:[o],thisArg:i}),new Bn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),ps=Ni((function(t,e,n){At.call(t,n)?++t[n]:rr(t,n,1)})),_s=Li(qo),gs=Li(Uo);function ms(t,e){return(Us(t)?Se:lr)(t,oo(e,3))}function vs(t,e){return(Us(t)?Ee:hr)(t,oo(e,3))}var ys=Ni((function(t,e,n){At.call(t,n)?t[n].push(e):rr(t,n,[e])})),ws=Kr((function(t,e,n){var i=-1,o="function"==typeof e,s=Hs(t)?r(t.length):[];return lr(t,(function(t){s[++i]=o?Ie(e,t,n):Nr(t,e,n)})),s})),bs=Ni((function(t,e,n){rr(t,n,e)}));function Cs(t,e){return(Us(t)?De:Mr)(t,oo(e,3))}var Is=Ni((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ts=Kr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&mo(t,e[0],e[1])?e=[]:n>2&&mo(e[0],e[1],e[2])&&(e=[e[0]]),Br(t,_r(e,1),[])})),Ss=ue||function(){return he.Date.now()};function Es(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Gi(t,u,i,i,i,i,e)}function ks(t,e){var n;if("function"!=typeof e)throw new kt(o);return t=da(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ns=Kr((function(t,e,n){var r=1;if(n.length){var i=an(n,io(Ns));r|=c}return Gi(t,r,e,n,i)})),Rs=Kr((function(t,e,n){var r=3;if(n.length){var i=an(n,io(Rs));r|=c}return Gi(e,r,t,n,i)}));function xs(t,e,n){var r,s,a,c,u,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new kt(o);function _(e){var n=r,o=s;return r=s=i,h=e,c=t.apply(o,n)}function g(t){var n=t-l;return l===i||n>=e||n<0||d&&t-h>=a}function m(){var t=Ss();if(g(t))return v(t);u=No(m,function(t){var n=e-(t-l);return d?mn(n,a-(t-h)):n}(t))}function v(t){return u=i,p&&r?_(t):(r=s=i,c)}function y(){var t=Ss(),n=g(t);if(r=arguments,s=this,l=t,n){if(u===i)return function(t){return h=t,u=No(m,e),f?_(t):c}(l);if(d)return yi(u),u=No(m,e),_(l)}return u===i&&(u=No(m,e)),c}return e=_a(e)||0,Xs(n)&&(f=!!n.leading,a=(d="maxWait"in n)?gn(_a(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),y.cancel=function(){u!==i&&yi(u),h=0,r=l=s=u=i},y.flush=function(){return u===i?c:v(Ss())},y}var Ds=Kr((function(t,e){return cr(t,1,e)})),Ps=Kr((function(t,e,n){return cr(t,_a(e)||0,n)}));function As(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new kt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(As.Cache||Hn),n}function Os(t){if("function"!=typeof t)throw new kt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}As.Cache=Hn;var Ls=mi((function(t,e){var n=(e=1==e.length&&Us(e[0])?De(e[0],Ye(oo())):De(_r(e,1),Ye(oo()))).length;return Kr((function(r){for(var i=-1,o=mn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Ie(t,this,r)}))})),Ms=Kr((function(t,e){var n=an(e,io(Ms));return Gi(t,c,i,e,n)})),Fs=Kr((function(t,e){var n=an(e,io(Fs));return Gi(t,64,i,e,n)})),js=Xi((function(t,e){return Gi(t,256,i,i,i,e)}));function $s(t,e){return t===e||t!=t&&e!=e}var Ws=Ui(Tr),Bs=Ui((function(t,e){return t>=e})),qs=Rr(function(){return arguments}())?Rr:function(t){return ta(t)&&At.call(t,"callee")&&!Vt.call(t,"callee")},Us=r.isArray,zs=me?Ye(me):function(t){return ta(t)&&Ir(t)==D};function Hs(t){return null!=t&&Zs(t.length)&&!Qs(t)}function Vs(t){return ta(t)&&Hs(t)}var Ks=ge||_c,Gs=ve?Ye(ve):function(t){return ta(t)&&Ir(t)==v};function Ys(t){if(!ta(t))return!1;var e=Ir(t);return e==y||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ra(t)}function Qs(t){if(!Xs(t))return!1;var e=Ir(t);return e==w||e==b||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Js(t){return"number"==typeof t&&t==da(t)}function Zs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function Xs(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ta(t){return null!=t&&"object"==typeof t}var ea=ye?Ye(ye):function(t){return ta(t)&&ho(t)==C};function na(t){return"number"==typeof t||ta(t)&&Ir(t)==I}function ra(t){if(!ta(t)||Ir(t)!=T)return!1;var e=zt(t);if(null===e)return!0;var n=At.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Pt.call(n)==Ft}var ia=we?Ye(we):function(t){return ta(t)&&Ir(t)==E},oa=be?Ye(be):function(t){return ta(t)&&ho(t)==k};function sa(t){return"string"==typeof t||!Us(t)&&ta(t)&&Ir(t)==N}function aa(t){return"symbol"==typeof t||ta(t)&&Ir(t)==R}var ca=Ce?Ye(Ce):function(t){return ta(t)&&Zs(t.length)&&!!ie[Ir(t)]},ua=Ui(Lr),la=Ui((function(t,e){return t<=e}));function ha(t){if(!t)return[];if(Hs(t))return sa(t)?hn(t):Ei(t);if(Yt&&t[Yt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Yt]());var e=ho(t);return(e==C?on:e==k?cn:$a)(t)}function fa(t){return t?(t=_a(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function da(t){var e=fa(t),n=e%1;return e==e?n?e-n:e:0}function pa(t){return t?or(da(t),0,d):0}function _a(t){if("number"==typeof t)return t;if(aa(t))return f;if(Xs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Xs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ge(t);var n=pt.test(t);return n||gt.test(t)?ce(t.slice(2),n?2:8):dt.test(t)?f:+t}function ga(t){return ki(t,Da(t))}function ma(t){return null==t?"":si(t)}var va=Ri((function(t,e){if(bo(e)||Hs(e))ki(e,xa(e),t);else for(var n in e)At.call(e,n)&&Xn(t,n,e[n])})),ya=Ri((function(t,e){ki(e,Da(e),t)})),wa=Ri((function(t,e,n,r){ki(e,Da(e),t,r)})),ba=Ri((function(t,e,n,r){ki(e,xa(e),t,r)})),Ca=Xi(ir),Ia=Kr((function(t,e){t=Tt(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&mo(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=Da(s),c=-1,u=a.length;++c<u;){var l=a[c],h=t[l];(h===i||$s(h,xt[l])&&!At.call(t,l))&&(t[l]=s[l])}return t})),Ta=Kr((function(t){return t.push(i,Qi),Ie(Aa,i,t)}));function Sa(t,e,n){var r=null==t?i:br(t,e);return r===i?n:r}function Ea(t,e){return null!=t&&fo(t,e,Er)}var ka=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Mt.call(e)),t[e]=n}),Xa(nc)),Na=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Mt.call(e)),At.call(t,e)?t[e].push(n):t[e]=[n]}),oo),Ra=Kr(Nr);function xa(t){return Hs(t)?Gn(t):Or(t)}function Da(t){return Hs(t)?Gn(t,!0):function(t){if(!Xs(t))return function(t){var e=[];if(null!=t)for(var n in Tt(t))e.push(n);return e}(t);var e=bo(t),n=[];for(var r in t)("constructor"!=r||!e&&At.call(t,r))&&n.push(r);return n}(t)}var Pa=Ri((function(t,e,n){$r(t,e,n)})),Aa=Ri((function(t,e,n,r){$r(t,e,n,r)})),Oa=Xi((function(t,e){var n={};if(null==t)return n;var r=!1;e=De(e,(function(e){return e=gi(e,t),r||(r=e.length>1),e})),ki(t,eo(t),n),r&&(n=sr(n,7,Ji));for(var i=e.length;i--;)ci(n,e[i]);return n})),La=Xi((function(t,e){return null==t?{}:function(t,e){return qr(t,e,(function(e,n){return Ea(t,n)}))}(t,e)}));function Ma(t,e){if(null==t)return{};var n=De(eo(t),(function(t){return[t]}));return e=oo(e),qr(t,n,(function(t,n){return e(t,n[0])}))}var Fa=Ki(xa),ja=Ki(Da);function $a(t){return null==t?[]:Qe(t,xa(t))}var Wa=Ai((function(t,e,n){return e=e.toLowerCase(),t+(n?Ba(e):e)}));function Ba(t){return Ya(ma(t).toLowerCase())}function qa(t){return(t=ma(t))&&t.replace(vt,tn).replace(Jt,"")}var Ua=Ai((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),za=Ai((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ha=Pi("toLowerCase"),Va=Ai((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ka=Ai((function(t,e,n){return t+(n?" ":"")+Ya(e)})),Ga=Ai((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ya=Pi("toUpperCase");function Qa(t,e,n){return t=ma(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.match(ct)||[]}(t):t.match(e)||[]}var Ja=Kr((function(t,e){try{return Ie(t,i,e)}catch(t){return Ys(t)?t:new bt(t)}})),Za=Xi((function(t,e){return Se(e,(function(e){e=Mo(e),rr(t,e,Ns(t[e],t))})),t}));function Xa(t){return function(){return t}}var tc=Mi(),ec=Mi(!0);function nc(t){return t}function rc(t){return Ar("function"==typeof t?t:sr(t,1))}var ic=Kr((function(t,e){return function(n){return Nr(n,t,e)}})),oc=Kr((function(t,e){return function(n){return Nr(t,n,e)}}));function sc(t,e,n){var r=xa(e),i=wr(e,r);null!=n||Xs(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,xa(e)));var o=!(Xs(n)&&"chain"in n&&!n.chain),s=Qs(t);return Se(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ei(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Pe([this.value()],arguments))})})),t}function ac(){}var cc=Wi(De),uc=Wi(ke),lc=Wi(Le);function hc(t){return vo(t)?Ue(Mo(t)):function(t){return function(e){return br(e,t)}}(t)}var fc=qi(),dc=qi(!0);function pc(){return[]}function _c(){return!1}var gc,mc=$i((function(t,e){return t+e}),0),vc=Hi("ceil"),yc=$i((function(t,e){return t/e}),1),wc=Hi("floor"),bc=$i((function(t,e){return t*e}),1),Cc=Hi("round"),Ic=$i((function(t,e){return t-e}),0);return jn.after=function(t,e){if("function"!=typeof e)throw new kt(o);return t=da(t),function(){if(--t<1)return e.apply(this,arguments)}},jn.ary=Es,jn.assign=va,jn.assignIn=ya,jn.assignInWith=wa,jn.assignWith=ba,jn.at=Ca,jn.before=ks,jn.bind=Ns,jn.bindAll=Za,jn.bindKey=Rs,jn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Us(t)?t:[t]},jn.chain=hs,jn.chunk=function(t,e,n){e=(n?mo(t,e,n):e===i)?1:gn(da(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,c=r(fe(o/e));s<o;)c[a++]=ti(t,s,s+=e);return c},jn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},jn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Pe(Us(n)?Ei(n):[n],_r(e,1))},jn.cond=function(t){var e=null==t?0:t.length,n=oo();return t=e?De(t,(function(t){if("function"!=typeof t[1])throw new kt(o);return[n(t[0]),t[1]]})):[],Kr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Ie(i[0],this,n))return Ie(i[1],this,n)}}))},jn.conforms=function(t){return function(t){var e=xa(t);return function(n){return ar(n,t,e)}}(sr(t,1))},jn.constant=Xa,jn.countBy=ps,jn.create=function(t,e){var n=$n(t);return null==e?n:nr(n,e)},jn.curry=function t(e,n,r){var o=Gi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},jn.curryRight=function t(e,n,r){var o=Gi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},jn.debounce=xs,jn.defaults=Ia,jn.defaultsDeep=Ta,jn.defer=Ds,jn.delay=Ps,jn.difference=$o,jn.differenceBy=Wo,jn.differenceWith=Bo,jn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:da(e))<0?0:e,r):[]},jn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:da(e)))<0?0:e):[]},jn.dropRightWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!0,!0):[]},jn.dropWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!0):[]},jn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&mo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=da(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:da(r))<0&&(r+=o),r=n>r?0:pa(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},jn.filter=function(t,e){return(Us(t)?Ne:pr)(t,oo(e,3))},jn.flatMap=function(t,e){return _r(Cs(t,e),1)},jn.flatMapDeep=function(t,e){return _r(Cs(t,e),l)},jn.flatMapDepth=function(t,e,n){return n=n===i?1:da(n),_r(Cs(t,e),n)},jn.flatten=zo,jn.flattenDeep=function(t){return null!=t&&t.length?_r(t,l):[]},jn.flattenDepth=function(t,e){return null!=t&&t.length?_r(t,e=e===i?1:da(e)):[]},jn.flip=function(t){return Gi(t,512)},jn.flow=tc,jn.flowRight=ec,jn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},jn.functions=function(t){return null==t?[]:wr(t,xa(t))},jn.functionsIn=function(t){return null==t?[]:wr(t,Da(t))},jn.groupBy=ys,jn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},jn.intersection=Vo,jn.intersectionBy=Ko,jn.intersectionWith=Go,jn.invert=ka,jn.invertBy=Na,jn.invokeMap=ws,jn.iteratee=rc,jn.keyBy=bs,jn.keys=xa,jn.keysIn=Da,jn.map=Cs,jn.mapKeys=function(t,e){var n={};return e=oo(e,3),vr(t,(function(t,r,i){rr(n,e(t,r,i),t)})),n},jn.mapValues=function(t,e){var n={};return e=oo(e,3),vr(t,(function(t,r,i){rr(n,r,e(t,r,i))})),n},jn.matches=function(t){return Fr(sr(t,1))},jn.matchesProperty=function(t,e){return jr(t,sr(e,1))},jn.memoize=As,jn.merge=Pa,jn.mergeWith=Aa,jn.method=ic,jn.methodOf=oc,jn.mixin=sc,jn.negate=Os,jn.nthArg=function(t){return t=da(t),Kr((function(e){return Wr(e,t)}))},jn.omit=Oa,jn.omitBy=function(t,e){return Ma(t,Os(oo(e)))},jn.once=function(t){return ks(2,t)},jn.orderBy=function(t,e,n,r){return null==t?[]:(Us(e)||(e=null==e?[]:[e]),Us(n=r?i:n)||(n=null==n?[]:[n]),Br(t,e,n))},jn.over=cc,jn.overArgs=Ls,jn.overEvery=uc,jn.overSome=lc,jn.partial=Ms,jn.partialRight=Fs,jn.partition=Is,jn.pick=La,jn.pickBy=Ma,jn.property=hc,jn.propertyOf=function(t){return function(e){return null==t?i:br(t,e)}},jn.pull=Qo,jn.pullAll=Jo,jn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,oo(n,2)):t},jn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,i,n):t},jn.pullAt=Zo,jn.range=fc,jn.rangeRight=dc,jn.rearg=js,jn.reject=function(t,e){return(Us(t)?Ne:pr)(t,Os(oo(e,3)))},jn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=oo(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return zr(t,i),n},jn.rest=function(t,e){if("function"!=typeof t)throw new kt(o);return Kr(t,e=e===i?e:da(e))},jn.reverse=Xo,jn.sampleSize=function(t,e,n){return e=(n?mo(t,e,n):e===i)?1:da(e),(Us(t)?Qn:Yr)(t,e)},jn.set=function(t,e,n){return null==t?t:Qr(t,e,n)},jn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Qr(t,e,n,r)},jn.shuffle=function(t){return(Us(t)?Jn:Xr)(t)},jn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&mo(t,e,n)?(e=0,n=r):(e=null==e?0:da(e),n=n===i?r:da(n)),ti(t,e,n)):[]},jn.sortBy=Ts,jn.sortedUniq=function(t){return t&&t.length?ii(t):[]},jn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},jn.split=function(t,e,n){return n&&"number"!=typeof n&&mo(t,e,n)&&(e=n=i),(n=n===i?d:n>>>0)?(t=ma(t))&&("string"==typeof e||null!=e&&!ia(e))&&!(e=si(e))&&rn(t)?vi(hn(t),0,n):t.split(e,n):[]},jn.spread=function(t,e){if("function"!=typeof t)throw new kt(o);return e=null==e?0:gn(da(e),0),Kr((function(n){var r=n[e],i=vi(n,0,e);return r&&Pe(i,r),Ie(t,this,i)}))},jn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},jn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:da(e))<0?0:e):[]},jn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:da(e)))<0?0:e,r):[]},jn.takeRightWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!1,!0):[]},jn.takeWhile=function(t,e){return t&&t.length?li(t,oo(e,3)):[]},jn.tap=function(t,e){return e(t),t},jn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new kt(o);return Xs(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),xs(t,e,{leading:r,maxWait:e,trailing:i})},jn.thru=fs,jn.toArray=ha,jn.toPairs=Fa,jn.toPairsIn=ja,jn.toPath=function(t){return Us(t)?De(t,Mo):aa(t)?[t]:Ei(Lo(ma(t)))},jn.toPlainObject=ga,jn.transform=function(t,e,n){var r=Us(t),i=r||Ks(t)||ca(t);if(e=oo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Xs(t)&&Qs(o)?$n(zt(t)):{}}return(i?Se:vr)(t,(function(t,r,i){return e(n,t,r,i)})),n},jn.unary=function(t){return Es(t,1)},jn.union=ts,jn.unionBy=es,jn.unionWith=ns,jn.uniq=function(t){return t&&t.length?ai(t):[]},jn.uniqBy=function(t,e){return t&&t.length?ai(t,oo(e,2)):[]},jn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ai(t,i,e):[]},jn.unset=function(t,e){return null==t||ci(t,e)},jn.unzip=rs,jn.unzipWith=is,jn.update=function(t,e,n){return null==t?t:ui(t,e,_i(n))},jn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ui(t,e,_i(n),r)},jn.values=$a,jn.valuesIn=function(t){return null==t?[]:Qe(t,Da(t))},jn.without=os,jn.words=Qa,jn.wrap=function(t,e){return Ms(_i(e),t)},jn.xor=ss,jn.xorBy=as,jn.xorWith=cs,jn.zip=us,jn.zipObject=function(t,e){return di(t||[],e||[],Xn)},jn.zipObjectDeep=function(t,e){return di(t||[],e||[],Qr)},jn.zipWith=ls,jn.entries=Fa,jn.entriesIn=ja,jn.extend=ya,jn.extendWith=wa,sc(jn,jn),jn.add=mc,jn.attempt=Ja,jn.camelCase=Wa,jn.capitalize=Ba,jn.ceil=vc,jn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=_a(n))==n?n:0),e!==i&&(e=(e=_a(e))==e?e:0),or(_a(t),e,n)},jn.clone=function(t){return sr(t,4)},jn.cloneDeep=function(t){return sr(t,5)},jn.cloneDeepWith=function(t,e){return sr(t,5,e="function"==typeof e?e:i)},jn.cloneWith=function(t,e){return sr(t,4,e="function"==typeof e?e:i)},jn.conformsTo=function(t,e){return null==e||ar(t,e,xa(e))},jn.deburr=qa,jn.defaultTo=function(t,e){return null==t||t!=t?e:t},jn.divide=yc,jn.endsWith=function(t,e,n){t=ma(t),e=si(e);var r=t.length,o=n=n===i?r:or(da(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},jn.eq=$s,jn.escape=function(t){return(t=ma(t))&&G.test(t)?t.replace(V,en):t},jn.escapeRegExp=function(t){return(t=ma(t))&&nt.test(t)?t.replace(et,"\\$&"):t},jn.every=function(t,e,n){var r=Us(t)?ke:fr;return n&&mo(t,e,n)&&(e=i),r(t,oo(e,3))},jn.find=_s,jn.findIndex=qo,jn.findKey=function(t,e){return Fe(t,oo(e,3),vr)},jn.findLast=gs,jn.findLastIndex=Uo,jn.findLastKey=function(t,e){return Fe(t,oo(e,3),yr)},jn.floor=wc,jn.forEach=ms,jn.forEachRight=vs,jn.forIn=function(t,e){return null==t?t:gr(t,oo(e,3),Da)},jn.forInRight=function(t,e){return null==t?t:mr(t,oo(e,3),Da)},jn.forOwn=function(t,e){return t&&vr(t,oo(e,3))},jn.forOwnRight=function(t,e){return t&&yr(t,oo(e,3))},jn.get=Sa,jn.gt=Ws,jn.gte=Bs,jn.has=function(t,e){return null!=t&&fo(t,e,Sr)},jn.hasIn=Ea,jn.head=Ho,jn.identity=nc,jn.includes=function(t,e,n,r){t=Hs(t)?t:$a(t),n=n&&!r?da(n):0;var i=t.length;return n<0&&(n=gn(i+n,0)),sa(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&$e(t,e,n)>-1},jn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:da(n);return i<0&&(i=gn(r+i,0)),$e(t,e,i)},jn.inRange=function(t,e,n){return e=fa(e),n===i?(n=e,e=0):n=fa(n),function(t,e,n){return t>=mn(e,n)&&t<gn(e,n)}(t=_a(t),e,n)},jn.invoke=Ra,jn.isArguments=qs,jn.isArray=Us,jn.isArrayBuffer=zs,jn.isArrayLike=Hs,jn.isArrayLikeObject=Vs,jn.isBoolean=function(t){return!0===t||!1===t||ta(t)&&Ir(t)==m},jn.isBuffer=Ks,jn.isDate=Gs,jn.isElement=function(t){return ta(t)&&1===t.nodeType&&!ra(t)},jn.isEmpty=function(t){if(null==t)return!0;if(Hs(t)&&(Us(t)||"string"==typeof t||"function"==typeof t.splice||Ks(t)||ca(t)||qs(t)))return!t.length;var e=ho(t);if(e==C||e==k)return!t.size;if(bo(t))return!Or(t).length;for(var n in t)if(At.call(t,n))return!1;return!0},jn.isEqual=function(t,e){return xr(t,e)},jn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?xr(t,e,i,n):!!r},jn.isError=Ys,jn.isFinite=function(t){return"number"==typeof t&&Me(t)},jn.isFunction=Qs,jn.isInteger=Js,jn.isLength=Zs,jn.isMap=ea,jn.isMatch=function(t,e){return t===e||Dr(t,e,ao(e))},jn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Dr(t,e,ao(e),n)},jn.isNaN=function(t){return na(t)&&t!=+t},jn.isNative=function(t){if(wo(t))throw new bt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(t)},jn.isNil=function(t){return null==t},jn.isNull=function(t){return null===t},jn.isNumber=na,jn.isObject=Xs,jn.isObjectLike=ta,jn.isPlainObject=ra,jn.isRegExp=ia,jn.isSafeInteger=function(t){return Js(t)&&t>=-9007199254740991&&t<=h},jn.isSet=oa,jn.isString=sa,jn.isSymbol=aa,jn.isTypedArray=ca,jn.isUndefined=function(t){return t===i},jn.isWeakMap=function(t){return ta(t)&&ho(t)==x},jn.isWeakSet=function(t){return ta(t)&&"[object WeakSet]"==Ir(t)},jn.join=function(t,e){return null==t?"":ze.call(t,e)},jn.kebabCase=Ua,jn.last=Yo,jn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=da(n))<0?gn(r+o,0):mn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):je(t,Be,o,!0)},jn.lowerCase=za,jn.lowerFirst=Ha,jn.lt=ua,jn.lte=la,jn.max=function(t){return t&&t.length?dr(t,nc,Tr):i},jn.maxBy=function(t,e){return t&&t.length?dr(t,oo(e,2),Tr):i},jn.mean=function(t){return qe(t,nc)},jn.meanBy=function(t,e){return qe(t,oo(e,2))},jn.min=function(t){return t&&t.length?dr(t,nc,Lr):i},jn.minBy=function(t,e){return t&&t.length?dr(t,oo(e,2),Lr):i},jn.stubArray=pc,jn.stubFalse=_c,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=bc,jn.nth=function(t,e){return t&&t.length?Wr(t,da(e)):i},jn.noConflict=function(){return he._===this&&(he._=jt),this},jn.noop=ac,jn.now=Ss,jn.pad=function(t,e,n){t=ma(t);var r=(e=da(e))?ln(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Bi(de(i),n)+t+Bi(fe(i),n)},jn.padEnd=function(t,e,n){t=ma(t);var r=(e=da(e))?ln(t):0;return e&&r<e?t+Bi(e-r,n):t},jn.padStart=function(t,e,n){t=ma(t);var r=(e=da(e))?ln(t):0;return e&&r<e?Bi(e-r,n)+t:t},jn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),yn(ma(t).replace(rt,""),e||0)},jn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&mo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=fa(t),e===i?(e=t,t=0):e=fa(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=wn();return mn(t+o*(e-t+ae("1e-"+((o+"").length-1))),e)}return Hr(t,e)},jn.reduce=function(t,e,n){var r=Us(t)?Ae:He,i=arguments.length<3;return r(t,oo(e,4),n,i,lr)},jn.reduceRight=function(t,e,n){var r=Us(t)?Oe:He,i=arguments.length<3;return r(t,oo(e,4),n,i,hr)},jn.repeat=function(t,e,n){return e=(n?mo(t,e,n):e===i)?1:da(e),Vr(ma(t),e)},jn.replace=function(){var t=arguments,e=ma(t[0]);return t.length<3?e:e.replace(t[1],t[2])},jn.result=function(t,e,n){var r=-1,o=(e=gi(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[Mo(e[r])];s===i&&(r=o,s=n),t=Qs(s)?s.call(t):s}return t},jn.round=Cc,jn.runInContext=t,jn.sample=function(t){return(Us(t)?Yn:Gr)(t)},jn.size=function(t){if(null==t)return 0;if(Hs(t))return sa(t)?ln(t):t.length;var e=ho(t);return e==C||e==k?t.size:Or(t).length},jn.snakeCase=Va,jn.some=function(t,e,n){var r=Us(t)?Le:ei;return n&&mo(t,e,n)&&(e=i),r(t,oo(e,3))},jn.sortedIndex=function(t,e){return ni(t,e)},jn.sortedIndexBy=function(t,e,n){return ri(t,e,oo(n,2))},jn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&$s(t[r],e))return r}return-1},jn.sortedLastIndex=function(t,e){return ni(t,e,!0)},jn.sortedLastIndexBy=function(t,e,n){return ri(t,e,oo(n,2),!0)},jn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if($s(t[n],e))return n}return-1},jn.startCase=Ka,jn.startsWith=function(t,e,n){return t=ma(t),n=null==n?0:or(da(n),0,t.length),e=si(e),t.slice(n,n+e.length)==e},jn.subtract=Ic,jn.sum=function(t){return t&&t.length?Ve(t,nc):0},jn.sumBy=function(t,e){return t&&t.length?Ve(t,oo(e,2)):0},jn.template=function(t,e,n){var r=jn.templateSettings;n&&mo(t,e,n)&&(e=i),t=ma(t),e=wa({},e,r,Yi);var o,s,a=wa({},e.imports,r.imports,Yi),c=xa(a),u=Qe(a,c),l=0,h=e.interpolate||yt,f="__p += '",d=St((e.escape||yt).source+"|"+h.source+"|"+(h===J?ht:yt).source+"|"+(e.evaluate||yt).source+"|$","g"),p="//# sourceURL="+(At.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(d,(function(e,n,r,i,a,c){return r||(r=i),f+=t.slice(l,c).replace(wt,nn),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+e.length,e})),f+="';\n";var _=At.call(e,"variable")&&e.variable;if(_){if(ut.test(_))throw new bt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(q,""):f).replace(U,"$1").replace(z,"$1;"),f="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Ja((function(){return Ct(c,p+"return "+f).apply(i,u)}));if(g.source=f,Ys(g))throw g;return g},jn.times=function(t,e){if((t=da(t))<1||t>h)return[];var n=d,r=mn(t,d);e=oo(e),t-=d;for(var i=Ke(r,e);++n<t;)e(n);return i},jn.toFinite=fa,jn.toInteger=da,jn.toLength=pa,jn.toLower=function(t){return ma(t).toLowerCase()},jn.toNumber=_a,jn.toSafeInteger=function(t){return t?or(da(t),-9007199254740991,h):0===t?t:0},jn.toString=ma,jn.toUpper=function(t){return ma(t).toUpperCase()},jn.trim=function(t,e,n){if((t=ma(t))&&(n||e===i))return Ge(t);if(!t||!(e=si(e)))return t;var r=hn(t),o=hn(e);return vi(r,Ze(r,o),Xe(r,o)+1).join("")},jn.trimEnd=function(t,e,n){if((t=ma(t))&&(n||e===i))return t.slice(0,fn(t)+1);if(!t||!(e=si(e)))return t;var r=hn(t);return vi(r,0,Xe(r,hn(e))+1).join("")},jn.trimStart=function(t,e,n){if((t=ma(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=si(e)))return t;var r=hn(t);return vi(r,Ze(r,hn(e))).join("")},jn.truncate=function(t,e){var n=30,r="...";if(Xs(e)){var o="separator"in e?e.separator:o;n="length"in e?da(e.length):n,r="omission"in e?si(e.omission):r}var s=(t=ma(t)).length;if(rn(t)){var a=hn(t);s=a.length}if(n>=s)return t;var c=n-ln(r);if(c<1)return r;var u=a?vi(a,0,c).join(""):t.slice(0,c);if(o===i)return u+r;if(a&&(c+=u.length-c),ia(o)){if(t.slice(c).search(o)){var l,h=u;for(o.global||(o=St(o.source,ma(ft.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;u=u.slice(0,f===i?c:f)}}else if(t.indexOf(si(o),c)!=c){var d=u.lastIndexOf(o);d>-1&&(u=u.slice(0,d))}return u+r},jn.unescape=function(t){return(t=ma(t))&&K.test(t)?t.replace(H,dn):t},jn.uniqueId=function(t){var e=++Ot;return ma(t)+e},jn.upperCase=Ga,jn.upperFirst=Ya,jn.each=ms,jn.eachRight=vs,jn.first=Ho,sc(jn,(gc={},vr(jn,(function(t,e){At.call(jn.prototype,e)||(gc[e]=t)})),gc),{chain:!1}),jn.VERSION="4.17.21",Se(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){jn[t].placeholder=jn})),Se(["drop","take"],(function(t,e){qn.prototype[t]=function(n){n=n===i?1:gn(da(n),0);var r=this.__filtered__&&!e?new qn(this):this.clone();return r.__filtered__?r.__takeCount__=mn(n,r.__takeCount__):r.__views__.push({size:mn(n,d),type:t+(r.__dir__<0?"Right":"")}),r},qn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Se(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;qn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Se(["head","last"],(function(t,e){var n="take"+(e?"Right":"");qn.prototype[t]=function(){return this[n](1).value()[0]}})),Se(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");qn.prototype[t]=function(){return this.__filtered__?new qn(this):this[n](1)}})),qn.prototype.compact=function(){return this.filter(nc)},qn.prototype.find=function(t){return this.filter(t).head()},qn.prototype.findLast=function(t){return this.reverse().find(t)},qn.prototype.invokeMap=Kr((function(t,e){return"function"==typeof t?new qn(this):this.map((function(n){return Nr(n,t,e)}))})),qn.prototype.reject=function(t){return this.filter(Os(oo(t)))},qn.prototype.slice=function(t,e){t=da(t);var n=this;return n.__filtered__&&(t>0||e<0)?new qn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=da(e))<0?n.dropRight(-e):n.take(e-t)),n)},qn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},qn.prototype.toArray=function(){return this.take(d)},vr(qn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=jn[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(jn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,c=e instanceof qn,u=a[0],l=c||Us(e),h=function(t){var e=o.apply(jn,Pe([t],a));return r&&f?e[0]:e};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,_=c&&!d;if(!s&&l){e=_?e:new qn(this);var g=t.apply(e,a);return g.__actions__.push({func:fs,args:[h],thisArg:i}),new Bn(g,f)}return p&&_?t.apply(this,a):(g=this.thru(h),p?r?g.value()[0]:g.value():g)})})),Se(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Nt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);jn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Us(i)?i:[],t)}return this[n]((function(n){return e.apply(Us(n)?n:[],t)}))}})),vr(qn.prototype,(function(t,e){var n=jn[e];if(n){var r=n.name+"";At.call(Rn,r)||(Rn[r]=[]),Rn[r].push({name:e,func:n})}})),Rn[Fi(i,2).name]=[{name:"wrapper",func:i}],qn.prototype.clone=function(){var t=new qn(this.__wrapped__);return t.__actions__=Ei(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ei(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ei(this.__views__),t},qn.prototype.reverse=function(){if(this.__filtered__){var t=new qn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},qn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Us(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=mn(e,t+s);break;case"takeRight":t=gn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=r?a:s-1,l=this.__iteratees__,h=l.length,f=0,d=mn(c,this.__takeCount__);if(!n||!r&&i==c&&d==c)return hi(t,this.__actions__);var p=[];t:for(;c--&&f<d;){for(var _=-1,g=t[u+=e];++_<h;){var m=l[_],v=m.iteratee,y=m.type,w=v(g);if(2==y)g=w;else if(!w){if(1==y)continue t;break t}}p[f++]=g}return p},jn.prototype.at=ds,jn.prototype.chain=function(){return hs(this)},jn.prototype.commit=function(){return new Bn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===i&&(this.__values__=ha(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},jn.prototype.plant=function(t){for(var e,n=this;n instanceof Wn;){var r=jo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},jn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof qn){var e=t;return this.__actions__.length&&(e=new qn(this)),(e=e.reverse()).__actions__.push({func:fs,args:[Xo],thisArg:i}),new Bn(e,this.__chain__)}return this.thru(Xo)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,Yt&&(jn.prototype[Yt]=function(){return this}),jn}();he._=pn,(r=function(){return pn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";n(486);const t=function(t,n){if(!t)throw e(n)},e=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},r=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],o=e+1<t.length,s=o?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,u=i>>2,l=(3&i)<<4|s>>4;let h=(15&s)<<2|c>>6,f=63&c;a||(f=64,o||(h=64)),r.push(n[u],n[l],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const i=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const c=e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==s||null==a||null==c)throw new o;const u=i<<2|s>>4;if(r.push(u),64!==a){const t=s<<4&240|a>>2;if(r.push(t),64!==c){const t=a<<6&192|c;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s=function(t){const e=r(t);return i.encodeByteArray(e,!0)},a=function(t){return s(t).replace(/\./g,"")},c=function(t){try{return i.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(t){return l(void 0,t)}function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=l(t[n],e[n]));return t}const h=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&c(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},f=()=>{var t;return null===(t=h())||void 0===t?void 0:t.config};class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function _(){try{return"object"==typeof indexedDB}catch(t){return!1}}function g(){return new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class m extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,m.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],o=i?function(t,e){return t.replace(y,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",s=`${this.serviceName}: ${o} (${r}).`;return new m(r,s,n)}}const y=/\{\$([^}]+)}/g;function w(t){return JSON.parse(t)}function b(t){return JSON.stringify(t)}const C=function(t){let e={},n={},r={},i="";try{const o=t.split(".");e=w(c(o[0])||""),n=w(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function S(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function E(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function k(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],o=e[i];if(N(n)&&N(o)){if(!k(n,o))return!1}else if(n!==o)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function N(t){return null!==t&&"object"==typeof t}class R{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const n=this.W_;if("string"==typeof t)for(let r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let t=16;t<80;t++){const e=n[t-3]^n[t-8]^n[t-14]^n[t-16];n[t]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],c=this.chain_[3],u=this.chain_[4];for(let t=0;t<80;t++){t<40?t<20?(r=c^s&(a^c),i=1518500249):(r=s^a^c,i=1859775393):t<60?(r=s&a|c&(s|a),i=2400959708):(r=s^a^c,i=3395469782);const e=(o<<5|o>>>27)+r+u+i+n[t]&4294967295;u=c,c=a,a=4294967295&(s<<30|s>>>2),s=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const n=e-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let t=this.blockSize-1;t>=56;t--)this.buf_[t]=255&e,e/=256;this.compress_(this.buf_);let n=0;for(let e=0;e<5;e++)for(let r=24;r>=0;r-=8)t[n]=this.chain_[e]>>r&255,++n;return t}}const x=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},D=1e3,P=2,A=144e5,O=.5;function L(t,e=D,n=P){const r=e*Math.pow(n,t),i=Math.round(O*r*(Math.random()-.5)*2);return Math.min(A,r+i)}function M(t){return t&&t._delegate?t._delegate:t}class F{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const j="[DEFAULT]";class ${constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new d;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:j})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=j){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=j){return this.instances.has(t)}getOptions(t=j){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===j?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t=j){return this.component?this.component.multipleInstances?t:j:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class W{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new $(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const B=[];var q;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(q||(q={}));const U={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},z=q.INFO,H={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},V=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=H[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class K{constructor(t){this.name=t,this._logLevel=z,this._logHandler=V,this._userLogHandler=null,B.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in q))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?U[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...t),this._logHandler(this,q.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...t),this._logHandler(this,q.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,q.INFO,...t),this._logHandler(this,q.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,q.WARN,...t),this._logHandler(this,q.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...t),this._logHandler(this,q.ERROR,...t)}}const G=(t,e)=>e.some((e=>t instanceof e));let Y,Q;const J=new WeakMap,Z=new WeakMap,X=new WeakMap,tt=new WeakMap,et=new WeakMap;let nt={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Z.get(t);if("objectStoreNames"===e)return t.objectStoreNames||X.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return it(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function rt(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Q||(Q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ot(this),t),it(J.get(this))}:function(...t){return it(e.apply(ot(this),t))}:function(t,...n){const r=e.call(ot(this),t,...n);return X.set(r,t.sort?t.sort():[t]),it(r)}:(t instanceof IDBTransaction&&function(t){if(Z.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{e(),r()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));Z.set(t,e)}(t),G(t,Y||(Y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,nt):t);var e}function it(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{e(it(t.result)),r()},o=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)}));return e.then((e=>{e instanceof IDBCursor&&J.set(e,t)})).catch((()=>{})),et.set(e,t),e}(t);if(tt.has(t))return tt.get(t);const e=rt(t);return e!==t&&(tt.set(t,e),et.set(e,t)),e}const ot=t=>et.get(t),st=["get","getKey","getAll","getAllKeys","count"],at=["put","add","delete","clear"],ct=new Map;function ut(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(ct.get(e))return ct.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=at.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!st.includes(n))return;const o=async function(t,...e){const o=this.transaction(t,i?"readwrite":"readonly");let s=o.store;return r&&(s=s.index(e.shift())),(await Promise.all([s[n](...e),i&&o.done]))[0]};return ct.set(e,o),o}var lt;lt=nt,nt={...lt,get:(t,e,n)=>ut(t,e)||lt.get(t,e,n),has:(t,e)=>!!ut(t,e)||lt.has(t,e)};class ht{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const ft="@firebase/app",dt="0.9.19",pt=new K("@firebase/app"),_t="[DEFAULT]",gt={[ft]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mt=new Map,vt=new Map;function yt(t,e){try{t.container.addComponent(e)}catch(n){pt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wt(t){const e=t.name;if(vt.has(e))return pt.debug(`There were multiple attempts to register component ${e}.`),!1;vt.set(e,t);for(const e of mt.values())yt(e,t);return!0}function bt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Ct=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class It{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new F("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ct.create("app-deleted",{appName:this._name})}}function Tt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:_t,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Ct.create("bad-app-name",{appName:String(i)});if(n||(n=f()),!n)throw Ct.create("no-options");const o=mt.get(i);if(o){if(k(n,o.options)&&k(r,o.config))return o;throw Ct.create("duplicate-app",{appName:i})}const s=new W(i);for(const t of vt.values())s.addComponent(t);const a=new It(n,r,s);return mt.set(i,a),a}function St(t=_t){const e=mt.get(t);if(!e&&t===_t&&f())return Tt();if(!e)throw Ct.create("no-app",{appName:t});return e}function Et(t,e,n){var r;let i=null!==(r=gt[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const t=[`Unable to register library "${i}" with version "${e}":`];return o&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&t.push("and"),s&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void pt.warn(t.join(" "))}wt(new F(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}const kt="firebase-heartbeat-database",Nt=1,Rt="firebase-heartbeat-store";let xt=null;function Dt(){return xt||(xt=function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=it(s);return r&&s.addEventListener("upgradeneeded",(t=>{r(it(s.result),t.oldVersion,t.newVersion,it(s.transaction),t)})),n&&s.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{o&&t.addEventListener("close",(()=>o())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(kt,Nt,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Rt)}}).catch((t=>{throw Ct.create("idb-open",{originalErrorMessage:t.message})}))),xt}async function Pt(t,e){try{const n=(await Dt()).transaction(Rt,"readwrite"),r=n.objectStore(Rt);await r.put(e,At(t)),await n.done}catch(t){if(t instanceof m)pt.warn(t.message);else{const e=Ct.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});pt.warn(e.message)}}}function At(t){return`${t.name}!${t.options.appId}`}class Ot{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Mt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=Lt();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=Lt(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),Ft(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ft(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=a(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Lt(){return(new Date).toISOString().substring(0,10)}class Mt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_()&&g().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await Dt();return await e.transaction(Rt).objectStore(Rt).get(At(t))}catch(t){if(t instanceof m)pt.warn(t.message);else{const e=Ct.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});pt.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Pt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Pt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Ft(t){return a(JSON.stringify({version:2,heartbeats:t})).length}wt(new F("platform-logger",(t=>new ht(t)),"PRIVATE")),wt(new F("heartbeat",(t=>new Ot(t)),"PRIVATE")),Et(ft,dt,""),Et(ft,dt,"esm2017"),Et("fire-js",""),Et("firebase","10.4.0","app");const jt="@firebase/database",$t="1.0.1";let Wt="";class Bt{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),b(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:w(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class qt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return I(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Ut=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Bt(e)}}catch(t){}return new qt},zt=Ut("localStorage"),Ht=Ut("sessionStorage"),Vt=new K("@firebase/database"),Kt=function(){let t=1;return function(){return t++}}(),Gt=function(e){const n=function(e){const n=[];let r=0;for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);if(o>=55296&&o<=56319){const n=o-55296;i++,t(i<e.length,"Surrogate pair missing trail surrogate."),o=65536+(n<<10)+(e.charCodeAt(i)-56320)}o<128?n[r++]=o:o<2048?(n[r++]=o>>6|192,n[r++]=63&o|128):o<65536?(n[r++]=o>>12|224,n[r++]=o>>6&63|128,n[r++]=63&o|128):(n[r++]=o>>18|240,n[r++]=o>>12&63|128,n[r++]=o>>6&63|128,n[r++]=63&o|128)}return n}(e),r=new R;r.update(n);const o=r.digest();return i.encodeByteArray(o)},Yt=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Yt.apply(null,r):e+="object"==typeof r?b(r):r,e+=" "}return e};let Qt=null,Jt=!0;const Zt=function(...e){if(!0===Jt&&(Jt=!1,null===Qt&&!0===Ht.get("logging_enabled")&&(n=!0,t(!r||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Vt.logLevel=q.VERBOSE,Qt=Vt.log.bind(Vt),r&&Ht.set("logging_enabled",!0)):"function"==typeof n?Qt=n:(Qt=null,Ht.remove("logging_enabled")))),Qt){const t=Yt.apply(null,e);Qt(t)}var n,r},Xt=function(t){return function(...e){Zt(t,...e)}},te=function(...t){const e="FIREBASE INTERNAL ERROR: "+Yt(...t);Vt.error(e)},ee=function(...t){const e=`FIREBASE FATAL ERROR: ${Yt(...t)}`;throw Vt.error(e),new Error(e)},ne=function(...t){const e="FIREBASE WARNING: "+Yt(...t);Vt.warn(e)},re=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},ie="[MIN_NAME]",oe="[MAX_NAME]",se=function(t,e){if(t===e)return 0;if(t===ie||e===oe)return-1;if(e===ie||t===oe)return 1;{const n=pe(t),r=pe(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},ae=function(t,e){return t===e?0:t<e?-1:1},ce=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+b(e))},ue=function(t){if("object"!=typeof t||null===t)return b(t);const e=[];for(const n in t)e.push(n);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=b(e[r]),n+=":",n+=ue(t[e[r]]);return n+="}",n},le=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function he(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const fe=function(e){t(!re(e),"Invalid JSON number");let n,r,i,o,s;0===e?(r=0,i=0,n=1/e==-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),r=o+1023,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const c=a.join("");let u="";for(s=0;s<64;s+=8){let t=parseInt(c.substr(s,8),2).toString(16);1===t.length&&(t="0"+t),u+=t}return u.toLowerCase()},de=new RegExp("^-?(0*)\\d{1,10}$"),pe=function(t){if(de.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},_e=function(t){try{t()}catch(t){setTimeout((()=>{const e=t.stack||"";throw ne("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ge=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class me{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((t=>this.appCheck=t))}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise(((e,n)=>{setTimeout((()=>{this.appCheck?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((e=>e.addTokenListener(t)))}notifyForInvalidToken(){ne(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ve{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((t=>this.auth_=t))}getToken(t){return this.auth_?this.auth_.getToken(t).catch((t=>t&&"auth/token-not-initialized"===t.code?(Zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t))):new Promise(((e,n)=>{setTimeout((()=>{this.auth_?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((e=>e.addAuthTokenListener(t)))}removeTokenChangeListener(t){this.authProvider_.get().then((e=>e.removeAuthTokenListener(t)))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ne(t)}}class ye{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}ye.OWNER="owner";const we="5",be=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ce="ac",Ie="websocket",Te="long_polling";class Se{constructor(t,e,n,r,i=!1,o="",s=!1,a=!1){this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zt.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&zt.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function Ee(e,n,r){let i;if(t("string"==typeof n,"typeof type must == string"),t("object"==typeof r,"typeof params must == object"),n===Ie)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(n!==Te)throw new Error("Unknown connection type: "+n);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(e)&&(r.ns=e.namespace);const o=[];return he(r,((t,e)=>{o.push(t+"="+e)})),i+o.join("&")}class ke{constructor(){this.counters_={}}incrementCounter(t,e=1){I(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return u(this.counters_)}}const Ne={},Re={};function xe(t){const e=t.toString();return Ne[e]||(Ne[e]=new ke),Ne[e]}class De{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<t.length;++e)t[e]&&_e((()=>{this.onMessage_(t[e])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Pe="start";class Ae{constructor(t,e,n,r,i,o,s){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xt(t),this.stats_=xe(e),this.urlFn=t=>(this.appCheckToken&&(t[Ce]=this.appCheckToken),Ee(e,Te,t))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new De(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Oe(((...t)=>{const[e,n,r,i,o]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,e===Pe)this.id=n,this.password=r;else{if("close"!==e)throw new Error("Unrecognized command received: "+e);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...t)=>{const[e,n]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(e,n)}),(()=>{this.onClosed_()}),this.urlFn);const t={};t[Pe]="t",t.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=this.scriptTagHolder.uniqueCallbackIdentifier),t.v=we,this.transportSessionId&&(t.s=this.transportSessionId),this.lastSessionId&&(t.ls=this.lastSessionId),this.applicationId&&(t.p=this.applicationId),this.appCheckToken&&(t[Ce]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&be.test(location.hostname)&&(t.r="f");const e=this.urlFn(t);this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ae.forceAllow_=!0}static forceDisallow(){Ae.forceDisallow_=!0}static isAvailable(){return!(!Ae.forceAllow_&&(Ae.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=b(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=s(e),r=le(n,1840);for(let t=0;t<r.length;t++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[t]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=b(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class Oe{constructor(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Kt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=Oe.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(t){Zt("frame writing exception"),t.stack&&Zt(t.stack),Zt(t)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Zt("No IE domain setting required")}catch(e){const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const t=this.pendingSegs.shift();n=n+"&seg"+r+"="+t.seg+"&ts"+r+"="+t.ts+"&d"+r+"="+t.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(t,(()=>{clearTimeout(r),n()}))}addTag(t,e){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const t=n.readyState;t&&"loaded"!==t&&"complete"!==t||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{Zt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(t){}}),Math.floor(1))}}let Le=null;"undefined"!=typeof MozWebSocket?Le=MozWebSocket:"undefined"!=typeof WebSocket&&(Le=WebSocket);class Me{constructor(t,e,n,r,i,o,s){this.connId=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xt(this.connId),this.stats_=xe(e),this.connURL=Me.connectionURL_(e,o,s,r,n),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,n,r,i){const o={};return o.v=we,"undefined"!=typeof location&&location.hostname&&be.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o[Ce]=r),i&&(o.p=i),Ee(t,Ie,o)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zt.set("previous_websocket_failure",!0);try{let t;0,this.mySock=new Le(this.connURL,[],t)}catch(t){this.log_("Error instantiating WebSocket.");const e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");const e=t.message||t.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){Me.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(e);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Le&&!Me.forceDisallow_}static previouslyFailed(){return zt.isInMemoryStorage||!0===zt.get("previous_websocket_failure")}markConnectionHealthy(){zt.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const e=w(t);this.onMessage(e)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(e){if(t(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(t){if(null===this.mySock)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{const t=this.extractFrameCount_(e);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();const e=b(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=le(e,16384);n.length>1&&this.sendString_(String(n.length));for(let t=0;t<n.length;t++)this.sendString_(n[t])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Me.responsesRequiredToBeHealthy=2,Me.healthyTimeout=3e4;class Fe{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ae,Me]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const e=Me&&Me.isAvailable();let n=e&&!Me.previouslyFailed();if(t.webSocketOnly&&(e||ne("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Me];else{const t=this.transports_=[];for(const e of Fe.ALL_TRANSPORTS)e&&e.isAvailable()&&t.push(e);Fe.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Fe.globalTransportInitialized_=!1;class je{constructor(t,e,n,r,i,o,s,a,c,u){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xt("c:"+this.id+":"),this.transportManager_=new Fe(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(e,n)}),Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=ge((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=ce("t",t),n=ce("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=ce("t",t),n=ce("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=ce("t",t);if("d"in t){const n=t.d;if("h"===e){const t=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(t.h=this.repoInfo_.host),this.onHandshake_(t)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?te("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):te("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),we!==n&&ne("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),ge((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ge((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class $e{put(t,e,n,r){}merge(t,e,n,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}}class We{constructor(e){this.allowedEvents_=e,this.listeners_={},t(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let t=0;t<n.length;t++)n[t].callback.apply(n[t].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});const r=this.getInitialEvent(t);r&&e.apply(n,r)}off(t,e,n){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let t=0;t<r.length;t++)if(r[t].callback===e&&(!n||n===r[t].context))return void r.splice(t,1)}validateEventType_(e){t(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Be extends We{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||p()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new Be}getInitialEvent(e){return t("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class qe{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let e=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[e]=this.pieces_[t],e++);this.pieces_.length=e,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Ue(){return new qe("")}function ze(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function He(t){return t.pieces_.length-t.pieceNum_}function Ve(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new qe(t.pieces_,e)}function Ke(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Ge(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Ye(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new qe(e,0)}function Qe(t,e){const n=[];for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);if(e instanceof qe)for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);else{const t=e.split("/");for(let e=0;e<t.length;e++)t[e].length>0&&n.push(t[e])}return new qe(n,0)}function Je(t){return t.pieceNum_>=t.pieces_.length}function Ze(t,e){const n=ze(t),r=ze(e);if(null===n)return e;if(n===r)return Ze(Ve(t),Ve(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Xe(t,e){if(He(t)!==He(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function tn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(He(t)>He(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class en{constructor(t,e){this.errorPrefix_=e,this.parts_=Ge(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let t=0;t<this.parts_.length;t++)this.byteLength_+=x(this.parts_[t]);nn(this)}}function nn(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+rn(t))}function rn(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class on extends We{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,(()=>{const e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))}),!1)}static getInstance(){return new on}getInitialEvent(e){return t("visible"===e,"Unknown event type: "+e),[this.visible_]}}const sn=1e3;class an extends $e{constructor(t,e,n,r,i,o,s,a){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=an.nextPersistentConnectionId_++,this.log_=Xt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=sn,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");on.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Be.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,o={r:i,a:e,b:n};this.log_(b(o)),t(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[i]=r)}get(t){this.initConnection_();const e=new d,n={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:t=>{const n=t.d;"ok"===t.s?e.resolve(n):e.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),e.promise}listen(e,n,r,i){this.initConnection_();const o=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),t(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),t(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,(n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(n)}))}sendListen_(t){const e=t.query,n=e._path.toString(),r=e._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};t.tag&&(i.q=e._queryObject,i.t=t.tag),i.h=t.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,s=i.s;an.warnOnListenWarnings_(o,e),(this.listens.get(n)&&this.listens.get(n).get(r))===t&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),t.onComplete&&t.onComplete(s,o))}))}static warnOnListenWarnings_(t,e){if(t&&"object"==typeof t&&I(t,"w")){const n=T(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',n=e._path.toString();ne(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(t){const e=C(t).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=function(t){const e=C(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}(t)?"auth":"gauth",n={cred:t};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,(e=>{const n=e.s,r=e.d||"error";this.authToken_===t&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(t=>{const e=t.s,n=t.d||"error";"ok"===e?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,n)}))}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),t(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);const i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})}onDisconnectMerge(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,n,r){const i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(t=>{r&&setTimeout((()=>{r(t.s,t.d)}),Math.floor(0))}))}put(t,e,n,r){this.putInternal("p",t,e,n,r)}merge(t,e,n,r){this.putInternal("m",t,e,n,r)}putInternal(t,e,n,r,i){this.initConnection_();const o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,n,(n=>{this.log_(e+" response",n),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,(t=>{if("ok"!==t.s){const e=t.d;this.log_("reportStats","Error sending stats: "+e)}}))}}onDataMessage_(t){if("r"in t){this.log_("from server: "+b(t));const e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):te("Unrecognized action received from server: "+b(t)+"\nAre you using the latest client?")}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){t(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=sn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=sn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=sn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+an.nextConnectionId_++,o=this.lastSessionId;let s=!1,a=null;const c=function(){a?a.close():(s=!0,r())},u=function(e){t(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:c,sendRequest:u};const l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[t,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);s?Zt("getToken() completed but was canceled"):(Zt("getToken() completed. Creating connection."),this.authToken_=t&&t.accessToken,this.appCheckToken_=c&&c.token,a=new je(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,(t=>{ne(t+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),o))}catch(t){this.log_("Failed to get token: "+t),s||(this.repoInfo_.nodeAdmin&&ne(t),c())}}}interrupt(t){Zt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Zt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],S(this.interruptReasons_)&&(this.reconnectDelay_=sn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let n;n=e?e.map((t=>ue(t))).join("$"):"default";const r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,e){const n=new qe(t).toString();let r;if(this.listens.has(n)){const t=this.listens.get(n);r=t.get(e),t.delete(e),0===t.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(t,e){Zt("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){Zt("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";t["sdk."+e+"."+Wt.replace(/\./g,"-")]=1,p()?t["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Be.getInstance().currentlyOnline();return S(this.interruptReasons_)&&t}}an.nextPersistentConnectionId_=0,an.nextConnectionId_=0;class cn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new cn(t,e)}}class un{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const n=new cn(ie,t),r=new cn(ie,e);return 0!==this.compare(n,r)}minPost(){return cn.MIN}}let ln;class hn extends un{static get __EMPTY_NODE(){return ln}static set __EMPTY_NODE(t){ln=t}compare(t,e){return se(t.name,e.name)}isDefinedOn(t){throw e("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return cn.MIN}maxPost(){return new cn(oe,ln)}makePost(e,n){return t("string"==typeof e,"KeyIndex indexValue must always be a string."),new cn(e,ln)}toString(){return".key"}}const fn=new hn;class dn{constructor(t,e,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class pn{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:pn.RED,this.left=null!=r?r:_n.EMPTY_NODE,this.right=null!=i?i:_n.EMPTY_NODE}copy(t,e,n,r,i){return new pn(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return _n.EMPTY_NODE;let t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return _n.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}pn.RED=!0,pn.BLACK=!1;class _n{constructor(t,e=_n.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new _n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,pn.BLACK,null,null))}remove(t){return new _n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,pn.BLACK,null,null))}get(t){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,r=null;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new dn(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new dn(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new dn(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new dn(this.root_,null,this.comparator_,!0,t)}}function gn(t,e){return se(t.name,e.name)}function mn(t,e){return se(t,e)}let vn;_n.EMPTY_NODE=new class{copy(t,e,n,r,i){return this}insert(t,e,n){return new pn(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const yn=function(t){return"number"==typeof t?"number:"+fe(t):"string:"+t},wn=function(e){if(e.isLeafNode()){const n=e.val();t("string"==typeof n||"number"==typeof n||"object"==typeof n&&I(n,".sv"),"Priority must be a string or number.")}else t(e===vn||e.isEmpty(),"priority of unexpected type.");t(e===vn||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let bn,Cn,In;class Tn{constructor(e,n=Tn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,t(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),wn(this.priorityNode_)}static set __childrenNodeConstructor(t){bn=t}static get __childrenNodeConstructor(){return bn}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Tn(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:Tn.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Je(t)?this:".priority"===ze(t)?this.priorityNode_:Tn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Tn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ze(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(t(".priority"!==r||1===He(e),".priority must be the last token in a path"),this.updateImmediateChild(r,Tn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ve(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+yn(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",t+="number"===e?fe(this.value_):this.value_,this.lazyHash_=Gt(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Tn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Tn.__childrenNodeConstructor?-1:(t(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Tn.VALUE_TYPE_ORDER.indexOf(n),o=Tn.VALUE_TYPE_ORDER.indexOf(r);return t(i>=0,"Unknown leaf type: "+n),t(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1}}Tn.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Sn=new class extends un{compare(t,e){const n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?se(t.name,e.name):i}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn(oe,new Tn("[PRIORITY-POST]",In))}makePost(t,e){const n=Cn(t);return new cn(e,new Tn("[PRIORITY-POST]",n))}toString(){return".priority"}},En=Math.log(2);class kn{constructor(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/En,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=t+1&n}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Nn=function(t,e,n,r){t.sort(e);const i=function(e,r){const o=r-e;let s,a;if(0===o)return null;if(1===o)return s=t[e],a=n?n(s):s,new pn(a,s.node,pn.BLACK,null,null);{const c=parseInt(o/2,10)+e,u=i(e,c),l=i(c+1,r);return s=t[c],a=n?n(s):s,new pn(a,s.node,pn.BLACK,u,l)}},o=function(e){let r=null,o=null,s=t.length;const a=function(e,r){const o=s-e,a=s;s-=e;const u=i(o+1,a),l=t[o],h=n?n(l):l;c(new pn(h,l.node,r,null,u))},c=function(t){r?(r.left=t,r=t):(o=t,r=t)};for(let t=0;t<e.count;++t){const n=e.nextBitIsOne(),r=Math.pow(2,e.count-(t+1));n?a(r,pn.BLACK):(a(r,pn.BLACK),a(r,pn.RED))}return o}(new kn(t.length));return new _n(r||e,o)};let Rn;const xn={};class Dn{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return t(xn&&Sn,"ChildrenNode.ts has not been loaded"),Rn=Rn||new Dn({".priority":xn},{".priority":Sn}),Rn}get(t){const e=T(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof _n?e:null}hasIndex(t){return I(this.indexSet_,t.toString())}addIndex(e,n){t(e!==fn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(cn.Wrap);let s,a=o.getNext();for(;a;)i=i||e.isDefinedOn(a.node),r.push(a),a=o.getNext();s=i?Nn(r,e.getCompare()):xn;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const l=Object.assign({},this.indexes_);return l[c]=s,new Dn(l,u)}addToIndexes(e,n){const r=E(this.indexes_,((r,i)=>{const o=T(this.indexSet_,i);if(t(o,"Missing index implementation for "+i),r===xn){if(o.isDefinedOn(e.node)){const t=[],r=n.getIterator(cn.Wrap);let i=r.getNext();for(;i;)i.name!==e.name&&t.push(i),i=r.getNext();return t.push(e),Nn(t,o.getCompare())}return xn}{const t=n.get(e.name);let i=r;return t&&(i=i.remove(new cn(e.name,t))),i.insert(e,e.node)}}));return new Dn(r,this.indexSet_)}removeFromIndexes(t,e){const n=E(this.indexes_,(n=>{if(n===xn)return n;{const r=e.get(t.name);return r?n.remove(new cn(t.name,r)):n}}));return new Dn(n,this.indexSet_)}}let Pn;class An{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&wn(this.priorityNode_),this.children_.isEmpty()&&t(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pn||(Pn=new An(new _n(mn),null,Dn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pn}updatePriority(t){return this.children_.isEmpty()?this:new An(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const e=this.children_.get(t);return null===e?Pn:e}}getChild(t){const e=ze(t);return null===e?this:this.getImmediateChild(e).getChild(Ve(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(e,n){if(t(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);{const t=new cn(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(t,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(t,this.children_));const o=r.isEmpty()?Pn:this.priorityNode_;return new An(r,o,i)}}updateChild(e,n){const r=ze(e);if(null===r)return n;{t(".priority"!==ze(e)||1===He(e),".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Ve(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let n=0,r=0,i=!0;if(this.forEachChild(Sn,((o,s)=>{e[o]=s.val(t),n++,i&&An.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!t&&i&&r<2*n){const t=[];for(const n in e)t[n]=e[n];return t}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+yn(this.getPriority().val())+":"),this.forEachChild(Sn,((e,n)=>{const r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":Gt(t)}return this.lazyHash_}getPredecessorChildName(t,e,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new cn(t,e));return n?n.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.minKey();return t&&t.name}return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new cn(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.maxKey();return t&&t.name}return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new cn(e,this.children_.get(e)):null}forEachChild(t,e){const n=this.resolveIndex_(t);return n?n.inorderTraversal((t=>e(t.name,t.node))):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(t=>t));{const n=this.children_.getIteratorFrom(t.name,cn.Wrap);let r=n.peek();for(;null!=r&&e.compare(r,t)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(t=>t));{const n=this.children_.getReverseIteratorFrom(t.name,cn.Wrap);let r=n.peek();for(;null!=r&&e.compare(r,t)>0;)n.getNext(),r=n.peek();return n}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===On?-1:0}withIndex(t){if(t===fn||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new An(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===fn||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){const t=this.getIterator(Sn),n=e.getIterator(Sn);let r=t.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=t.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(t){return t===fn?null:this.indexMap_.get(t.toString())}}An.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const On=new class extends An{constructor(){super(new _n(mn),An.EMPTY_NODE,Dn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return An.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(cn,{MIN:{value:new cn(ie,An.EMPTY_NODE)},MAX:{value:new cn(oe,On)}}),hn.__EMPTY_NODE=An.EMPTY_NODE,Tn.__childrenNodeConstructor=An,vn=On,In=On;const Ln=!0;function Mn(e,n=null){if(null===e)return An.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(n=e[".priority"]),t(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Tn(e,Mn(n));if(e instanceof Array||!Ln){let t=An.EMPTY_NODE;return he(e,((n,r)=>{if(I(e,n)&&"."!==n.substring(0,1)){const e=Mn(r);!e.isLeafNode()&&e.isEmpty()||(t=t.updateImmediateChild(n,e))}})),t.updatePriority(Mn(n))}{const t=[];let r=!1;if(he(e,((e,n)=>{if("."!==e.substring(0,1)){const i=Mn(n);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),t.push(new cn(e,i)))}})),0===t.length)return An.EMPTY_NODE;const i=Nn(t,gn,(t=>t.name),mn);if(r){const e=Nn(t,Sn.getCompare());return new An(i,Mn(n),new Dn({".priority":e},{".priority":Sn}))}return new An(i,Mn(n),Dn.Default)}}!function(t){Cn=t}(Mn);class Fn extends un{constructor(e){super(),this.indexPath_=e,t(!Je(e)&&".priority"!==ze(e),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?se(t.name,e.name):i}makePost(t,e){const n=Mn(t),r=An.EMPTY_NODE.updateChild(this.indexPath_,n);return new cn(e,r)}maxPost(){const t=An.EMPTY_NODE.updateChild(this.indexPath_,On);return new cn(oe,t)}toString(){return Ge(this.indexPath_,0).join("/")}}const jn=new class extends un{compare(t,e){const n=t.node.compareTo(e.node);return 0===n?se(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(t,e){const n=Mn(t);return new cn(e,n)}toString(){return".value"}};function $n(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class Wn{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return t(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return t(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ie}hasEnd(){return this.endSet_}getIndexEndValue(){return t(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return t(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oe}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return t(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sn}copy(){const t=new Wn;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Bn(e){const n={};if(e.isDefault())return n;let r;if(e.index_===Sn?r="$priority":e.index_===jn?r="$value":e.index_===fn?r="$key":(t(e.index_ instanceof Fn,"Unrecognized index type!"),r=e.index_.toString()),n.orderBy=b(r),e.startSet_){const t=e.startAfterSet_?"startAfter":"startAt";n[t]=b(e.indexStartValue_),e.startNameSet_&&(n[t]+=","+b(e.indexStartName_))}if(e.endSet_){const t=e.endBeforeSet_?"endBefore":"endAt";n[t]=b(e.indexEndValue_),e.endNameSet_&&(n[t]+=","+b(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function qn(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Sn&&(e.i=t.index_.toString()),e}class Un extends $e{constructor(t,e,n,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Xt("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(t(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(t,e,n,r){const i=t._path.toString();this.log_("Listen called for "+i+" "+t._queryIdentifier);const o=Un.getListenId_(t,n),s={};this.listens_[o]=s;const a=Bn(t._queryParams);this.restRequest_(i+".json",a,((t,e)=>{let a=e;if(404===t&&(a=null,t=null),null===t&&this.onDataUpdate_(i,a,!1,n),T(this.listens_,o)===s){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",r(e,null)}}))}unlisten(t,e){const n=Un.getListenId_(t,e);delete this.listens_[n]}get(t){const e=Bn(t._queryParams),n=t._path.toString(),r=new d;return this.restRequest_(n+".json",e,((t,e)=>{let i=e;404===t&&(i=null,t=null),null===t?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([r,i])=>{r&&r.accessToken&&(e.auth=r.accessToken),i&&i.token&&(e.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+function(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}(e);this.log_("Sending REST request for "+o);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(n&&4===s.readyState){this.log_("REST Response for "+o+" received. status:",s.status,"response:",s.responseText);let t=null;if(s.status>=200&&s.status<300){try{t=w(s.responseText)}catch(t){ne("Failed to parse JSON response for "+o+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&ne("Got unsuccessful REST response for "+o+" Status: "+s.status),n(s.status);n=null}},s.open("GET",o,!0),s.send()}))}}class zn{constructor(){this.rootNode_=An.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Hn(){return{value:null,children:new Map}}function Vn(t,e,n){if(Je(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=ze(e);t.children.has(r)||t.children.set(r,Hn()),Vn(t.children.get(r),e=Ve(e),n)}}function Kn(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(((t,n)=>{e(n,t)}))}(t,((t,r)=>{Kn(r,new qe(e.toString()+"/"+t),n)}))}class Gn{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&he(this.last_,((t,n)=>{e[t]=e[t]-n})),this.last_=t,e}}class Yn{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Gn(t);const n=1e4+2e4*Math.random();ge(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),e={};let n=!1;he(t,((t,r)=>{r>0&&I(this.statsToReport_,t)&&(e[t]=r,n=!0)})),n&&this.server_.reportStats(e),ge(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Qn;function Jn(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Qn||(Qn={}));class Zn{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Qn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Je(this.path)){if(null!=this.affectedTree.value)return t(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new qe(e));return new Zn(Ue(),t,this.revert)}}return t(ze(this.path)===e,"operationForChild called for unrelated child."),new Zn(Ve(this.path),this.affectedTree,this.revert)}}class Xn{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Qn.OVERWRITE}operationForChild(t){return Je(this.path)?new Xn(this.source,Ue(),this.snap.getImmediateChild(t)):new Xn(this.source,Ve(this.path),this.snap)}}class tr{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Qn.MERGE}operationForChild(e){if(Je(this.path)){const t=this.children.subtree(new qe(e));return t.isEmpty()?null:t.value?new Xn(this.source,Ue(),t.value):new tr(this.source,Ue(),t)}return t(ze(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new tr(this.source,Ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class er{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Je(t))return this.isFullyInitialized()&&!this.filtered_;const e=ze(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function nr(t,n,r,i,o,s){const a=i.filter((t=>t.type===r));a.sort(((n,r)=>function(t,n,r){if(null==n.childName||null==r.childName)throw e("Should only compare child_ events.");const i=new cn(n.childName,n.snapshotNode),o=new cn(r.childName,r.snapshotNode);return t.index_.compare(i,o)}(t,n,r))),a.forEach((e=>{const r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,e,s);o.forEach((i=>{i.respondsTo(e.type)&&n.push(i.createEvent(r,t.query_))}))}))}function rr(t,e){return{eventCache:t,serverCache:e}}function ir(t,e,n,r){return rr(new er(e,n,r),t.serverCache)}function or(t,e,n,r){return rr(t.eventCache,new er(e,n,r))}function sr(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ar(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let cr;class ur{constructor(t,e=(()=>(cr||(cr=new _n(ae)),cr))()){this.value=t,this.children=e}static fromObject(t){let e=new ur(null);return he(t,((t,n)=>{e=e.set(new qe(t),n)})),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Ue(),value:this.value};if(Je(t))return null;{const n=ze(t),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(Ve(t),e);return null!=i?{path:Qe(new qe(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,(()=>!0))}subtree(t){if(Je(t))return this;{const e=ze(t),n=this.children.get(e);return null!==n?n.subtree(Ve(t)):new ur(null)}}set(t,e){if(Je(t))return new ur(e,this.children);{const n=ze(t),r=(this.children.get(n)||new ur(null)).set(Ve(t),e),i=this.children.insert(n,r);return new ur(this.value,i)}}remove(t){if(Je(t))return this.children.isEmpty()?new ur(null):new ur(null,this.children);{const e=ze(t),n=this.children.get(e);if(n){const r=n.remove(Ve(t));let i;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?new ur(null):new ur(this.value,i)}return this}}get(t){if(Je(t))return this.value;{const e=ze(t),n=this.children.get(e);return n?n.get(Ve(t)):null}}setTree(t,e){if(Je(t))return e;{const n=ze(t),r=(this.children.get(n)||new ur(null)).setTree(Ve(t),e);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new ur(this.value,i)}}fold(t){return this.fold_(Ue(),t)}fold_(t,e){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(Qe(t,r),e)})),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,Ue(),e)}findOnPath_(t,e,n){const r=!!this.value&&n(e,this.value);if(r)return r;if(Je(t))return null;{const r=ze(t),i=this.children.get(r);return i?i.findOnPath_(Ve(t),Qe(e,r),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Ue(),e)}foreachOnPath_(t,e,n){if(Je(t))return this;{this.value&&n(e,this.value);const r=ze(t),i=this.children.get(r);return i?i.foreachOnPath_(Ve(t),Qe(e,r),n):new ur(null)}}foreach(t){this.foreach_(Ue(),t)}foreach_(t,e){this.children.inorderTraversal(((n,r)=>{r.foreach_(Qe(t,n),e)})),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal(((e,n)=>{n.value&&t(e,n.value)}))}}class lr{constructor(t){this.writeTree_=t}static empty(){return new lr(new ur(null))}}function hr(t,e,n){if(Je(e))return new lr(new ur(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=Ze(i,e);return o=o.updateChild(s,n),new lr(t.writeTree_.set(i,o))}{const r=new ur(n),i=t.writeTree_.setTree(e,r);return new lr(i)}}}function fr(t,e,n){let r=t;return he(n,((t,n)=>{r=hr(r,Qe(e,t),n)})),r}function dr(t,e){if(Je(e))return lr.empty();{const n=t.writeTree_.setTree(e,new ur(null));return new lr(n)}}function pr(t,e){return null!=_r(t,e)}function _r(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Ze(n.path,e)):null}function gr(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Sn,((t,n)=>{e.push(new cn(t,n))})):t.writeTree_.children.inorderTraversal(((t,n)=>{null!=n.value&&e.push(new cn(t,n.value))})),e}function mr(t,e){if(Je(e))return t;{const n=_r(t,e);return new lr(null!=n?new ur(n):t.writeTree_.subtree(e))}}function vr(t){return t.writeTree_.isEmpty()}function yr(t,e){return wr(Ue(),t.writeTree_,e)}function wr(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);{let i=null;return n.children.inorderTraversal(((n,o)=>{".priority"===n?(t(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=wr(Qe(e,n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(Qe(e,".priority"),i)),r}}function br(t,e){return Pr(e,t)}function Cr(t,e){if(t.snap)return tn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&tn(Qe(t.path,n),e))return!0;return!1}function Ir(t){return t.visible}function Tr(t,n,r){let i=lr.empty();for(let o=0;o<t.length;++o){const s=t[o];if(n(s)){const t=s.path;let n;if(s.snap)tn(r,t)?(n=Ze(r,t),i=hr(i,n,s.snap)):tn(t,r)&&(n=Ze(t,r),i=hr(i,Ue(),s.snap.getChild(n)));else{if(!s.children)throw e("WriteRecord should have .snap or .children");if(tn(r,t))n=Ze(r,t),i=fr(i,n,s.children);else if(tn(t,r))if(n=Ze(t,r),Je(n))i=fr(i,Ue(),s.children);else{const t=T(s.children,ze(n));if(t){const e=t.getChild(Ve(n));i=hr(i,Ue(),e)}}}}}return i}function Sr(t,e,n,r,i){if(r||i){const o=mr(t.visibleWrites,e);if(!i&&vr(o))return n;if(i||null!=n||pr(o,Ue())){const o=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(tn(t.path,e)||tn(e,t.path))};return yr(Tr(t.allWrites,o,e),n||An.EMPTY_NODE)}return null}{const r=_r(t.visibleWrites,e);if(null!=r)return r;{const r=mr(t.visibleWrites,e);return vr(r)?n:null!=n||pr(r,Ue())?yr(r,n||An.EMPTY_NODE):null}}}function Er(t,e,n,r){return Sr(t.writeTree,t.treePath,e,n,r)}function kr(t,e){return function(t,e,n){let r=An.EMPTY_NODE;const i=_r(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Sn,((t,e)=>{r=r.updateImmediateChild(t,e)})),r;if(n){const i=mr(t.visibleWrites,e);return n.forEachChild(Sn,((t,e)=>{const n=yr(mr(i,new qe(t)),e);r=r.updateImmediateChild(t,n)})),gr(i).forEach((t=>{r=r.updateImmediateChild(t.name,t.node)})),r}return gr(mr(t.visibleWrites,e)).forEach((t=>{r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Nr(e,n,r,i){return function(e,n,r,i,o){t(i||o,"Either existingEventSnap or existingServerSnap must exist");const s=Qe(n,r);if(pr(e.visibleWrites,s))return null;{const t=mr(e.visibleWrites,s);return vr(t)?o.getChild(r):yr(t,o.getChild(r))}}(e.writeTree,e.treePath,n,r,i)}function Rr(t,e){return function(t,e){return _r(t.visibleWrites,e)}(t.writeTree,Qe(t.treePath,e))}function xr(t,e,n){return function(t,e,n,r){const i=Qe(e,n),o=_r(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?yr(mr(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function Dr(t,e){return Pr(Qe(t.treePath,e),t.writeTree)}function Pr(t,e){return{treePath:t,writeTree:e}}class Ar{constructor(){this.changeMap=new Map}trackChildChange(n){const r=n.type,i=n.childName;t("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),t(".priority"!==i,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const t=o.type;if("child_added"===r&&"child_removed"===t)this.changeMap.set(i,$n(i,n.snapshotNode,o.snapshotNode));else if("child_removed"===r&&"child_added"===t)this.changeMap.delete(i);else if("child_removed"===r&&"child_changed"===t)this.changeMap.set(i,(s=i,{type:"child_removed",snapshotNode:o.oldSnap,childName:s}));else if("child_changed"===r&&"child_added"===t)this.changeMap.set(i,function(t,e){return{type:"child_added",snapshotNode:e,childName:t}}(i,n.snapshotNode));else{if("child_changed"!==r||"child_changed"!==t)throw e("Illegal combination of changes: "+n+" occurred after "+o);this.changeMap.set(i,$n(i,n.snapshotNode,o.oldSnap))}}else this.changeMap.set(i,n);var s}getChanges(){return Array.from(this.changeMap.values())}}const Or=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}};class Lr{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const e=null!=this.optCompleteServerCache_?new er(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xr(this.writes_,t,e)}}getChildAfterChild(t,e,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ar(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){let a;const c=mr(t.visibleWrites,e),u=_r(c,Ue());if(null!=u)a=u;else{if(null==n)return[];a=yr(c,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const t=[],e=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let c=n.getNext();for(;c&&t.length<i;)0!==e(c,r)&&t.push(c),c=n.getNext();return t}}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]}}function Mr(e,n,r,i,o,s){const a=n.eventCache;if(null!=Rr(i,r))return n;{let c,u;if(Je(r))if(t(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const t=ar(n),r=kr(i,t instanceof An?t:An.EMPTY_NODE);c=e.filter.updateFullNode(n.eventCache.getNode(),r,s)}else{const t=Er(i,ar(n));c=e.filter.updateFullNode(n.eventCache.getNode(),t,s)}else{const l=ze(r);if(".priority"===l){t(1===He(r),"Can't have a priority with additional path components");const o=a.getNode();u=n.serverCache.getNode();const s=Nr(i,r,o,u);c=null!=s?e.filter.updatePriority(o,s):a.getNode()}else{const t=Ve(r);let h;if(a.isCompleteForChild(l)){u=n.serverCache.getNode();const e=Nr(i,r,a.getNode(),u);h=null!=e?a.getNode().getImmediateChild(l).updateChild(t,e):a.getNode().getImmediateChild(l)}else h=xr(i,l,n.serverCache);c=null!=h?e.filter.updateChild(a.getNode(),l,h,t,o,s):a.getNode()}}return ir(n,c,a.isFullyInitialized()||Je(r),e.filter.filtersNodes())}}function Fr(t,e,n,r,i,o,s,a){const c=e.serverCache;let u;const l=s?t.filter:t.filter.getIndexedFilter();if(Je(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){const t=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),t,null)}else{const t=ze(n);if(!c.isCompleteForPath(n)&&He(n)>1)return e;const i=Ve(n),o=c.getNode().getImmediateChild(t).updateChild(i,r);u=".priority"===t?l.updatePriority(c.getNode(),o):l.updateChild(c.getNode(),t,o,i,Or,null)}const h=or(e,u,c.isFullyInitialized()||Je(n),l.filtersNodes());return Mr(t,h,n,i,new Lr(i,h,o),a)}function jr(t,e,n,r,i,o,s){const a=e.eventCache;let c,u;const l=new Lr(i,e,o);if(Je(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=ir(e,u,!0,t.filter.filtersNodes());else{const i=ze(n);if(".priority"===i)u=t.filter.updatePriority(e.eventCache.getNode(),r),c=ir(e,u,a.isFullyInitialized(),a.isFiltered());else{const o=Ve(n),u=a.getNode().getImmediateChild(i);let h;if(Je(o))h=r;else{const t=l.getCompleteChild(i);h=null!=t?".priority"===Ke(o)&&t.getChild(Ye(o)).isEmpty()?t:t.updateChild(o,r):An.EMPTY_NODE}c=u.equals(h)?e:ir(e,t.filter.updateChild(a.getNode(),i,h,o,l,s),a.isFullyInitialized(),t.filter.filtersNodes())}}return c}function $r(t,e){return t.eventCache.isCompleteForChild(e)}function Wr(t,e,n){return n.foreach(((t,n)=>{e=e.updateChild(t,n)})),e}function Br(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,u=e;c=Je(n)?r:new ur(null).setTree(n,r);const l=e.serverCache.getNode();return c.children.inorderTraversal(((n,r)=>{if(l.hasChild(n)){const c=Wr(0,e.serverCache.getNode().getImmediateChild(n),r);u=Fr(t,u,new qe(n),c,i,o,s,a)}})),c.children.inorderTraversal(((n,r)=>{const c=!e.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!c){const c=Wr(0,e.serverCache.getNode().getImmediateChild(n),r);u=Fr(t,u,new qe(n),c,i,o,s,a)}})),u}function qr(t,e){const n=ar(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Je(e)&&!n.getImmediateChild(ze(e)).isEmpty())?n.getChild(e):null}function Ur(n,r,i,o){r.type===Qn.MERGE&&null!==r.source.queryId&&(t(ar(n.viewCache_),"We should always have a full cache before handling merges"),t(sr(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,a=function(n,r,i,o,s){const a=new Ar;let c,u;if(i.type===Qn.OVERWRITE){const e=i;e.source.fromUser?c=jr(n,r,e.path,e.snap,o,s,a):(t(e.source.fromServer,"Unknown source."),u=e.source.tagged||r.serverCache.isFiltered()&&!Je(e.path),c=Fr(n,r,e.path,e.snap,o,s,u,a))}else if(i.type===Qn.MERGE){const e=i;e.source.fromUser?c=function(t,e,n,r,i,o,s){let a=e;return r.foreach(((r,c)=>{const u=Qe(n,r);$r(e,ze(u))&&(a=jr(t,a,u,c,i,o,s))})),r.foreach(((r,c)=>{const u=Qe(n,r);$r(e,ze(u))||(a=jr(t,a,u,c,i,o,s))})),a}(n,r,e.path,e.children,o,s,a):(t(e.source.fromServer,"Unknown source."),u=e.source.tagged||r.serverCache.isFiltered(),c=Br(n,r,e.path,e.children,o,s,u,a))}else if(i.type===Qn.ACK_USER_WRITE){const e=i;c=e.revert?function(e,n,r,i,o,s){let a;if(null!=Rr(i,r))return n;{const c=new Lr(i,n,o),u=n.eventCache.getNode();let l;if(Je(r)||".priority"===ze(r)){let r;if(n.serverCache.isFullyInitialized())r=Er(i,ar(n));else{const e=n.serverCache.getNode();t(e instanceof An,"serverChildren would be complete if leaf node"),r=kr(i,e)}l=e.filter.updateFullNode(u,r,s)}else{const t=ze(r);let o=xr(i,t,n.serverCache);null==o&&n.serverCache.isCompleteForChild(t)&&(o=u.getImmediateChild(t)),l=null!=o?e.filter.updateChild(u,t,o,Ve(r),c,s):n.eventCache.getNode().hasChild(t)?e.filter.updateChild(u,t,An.EMPTY_NODE,Ve(r),c,s):u,l.isEmpty()&&n.serverCache.isFullyInitialized()&&(a=Er(i,ar(n)),a.isLeafNode()&&(l=e.filter.updateFullNode(l,a,s)))}return a=n.serverCache.isFullyInitialized()||null!=Rr(i,Ue()),ir(n,l,a,e.filter.filtersNodes())}}(n,r,e.path,o,s,a):function(t,e,n,r,i,o,s){if(null!=Rr(i,n))return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(Je(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Fr(t,e,n,c.getNode().getChild(n),i,o,a,s);if(Je(n)){let r=new ur(null);return c.getNode().forEachChild(fn,((t,e)=>{r=r.set(new qe(t),e)})),Br(t,e,n,r,i,o,a,s)}return e}{let u=new ur(null);return r.foreach(((t,e)=>{const r=Qe(n,t);c.isCompleteForPath(r)&&(u=u.set(t,c.getNode().getChild(r)))})),Br(t,e,n,u,i,o,a,s)}}(n,r,e.path,e.affectedTree,o,s,a)}else{if(i.type!==Qn.LISTEN_COMPLETE)throw e("Unknown operation type: "+i.type);c=function(t,e,n,r,i){const o=e.serverCache;return Mr(t,or(e,o.getNode(),o.isFullyInitialized()||Je(n),o.isFiltered()),n,r,Or,i)}(n,r,i.path,o,a)}const l=a.getChanges();return function(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=sr(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push({type:"value",snapshotNode:sr(e)})}}(r,c,l),{viewCache:c,changes:l}}(n.processor_,s,r,i,o);var c,u;return c=n.processor_,u=a.viewCache,t(u.eventCache.getNode().isIndexed(c.filter.getIndex()),"Event snap not indexed"),t(u.serverCache.getNode().isIndexed(c.filter.getIndex()),"Server snap not indexed"),t(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){const i=[],o=[];return e.forEach((e=>{var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),nr(t,i,"child_removed",e,r,n),nr(t,i,"child_added",e,r,n),nr(t,i,"child_moved",o,r,n),nr(t,i,"child_changed",e,r,n),nr(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let zr,Hr;function Vr(e,n,r,i){const o=n.source.queryId;if(null!==o){const s=e.views.get(o);return t(null!=s,"SyncTree gave us an op for an invalid query."),Ur(s,n,r,i)}{let t=[];for(const o of e.views.values())t=t.concat(Ur(o,n,r,i));return t}}function Kr(t,e){let n=null;for(const r of t.views.values())n=n||qr(r,e);return n}class Gr{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ur(null),this.pendingWriteTree_={visibleWrites:lr.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Yr(e,n,r,i,o){return function(e,n,r,i,o){t(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),e.allWrites.push({path:n,snap:r,writeId:i,visible:o}),o&&(e.visibleWrites=hr(e.visibleWrites,n,r)),e.lastWriteId=i}(e.pendingWriteTree_,n,r,i,o),o?Xr(e,new Xn({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,r)):[]}function Qr(e,n,r=!1){const i=function(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(e.pendingWriteTree_,n);if(function(e,n){const r=e.allWrites.findIndex((t=>t.writeId===n));t(r>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[r];e.allWrites.splice(r,1);let o=i.visible,s=!1,a=e.allWrites.length-1;for(;o&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=r&&Cr(t,i.path)?o=!1:tn(i.path,t.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=Tr(t.allWrites,Ir,Ue()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(e),!0):(i.snap?e.visibleWrites=dr(e.visibleWrites,i.path):he(i.children,(t=>{e.visibleWrites=dr(e.visibleWrites,Qe(i.path,t))})),!0))}(e.pendingWriteTree_,n)){let t=new ur(null);return null!=i.snap?t=t.set(Ue(),!0):he(i.children,(e=>{t=t.set(new qe(e),!0)})),Xr(e,new Zn(i.path,t,r))}return[]}function Jr(t,e,n){return Xr(t,new Xn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Zr(t,e,n){const r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,((t,n)=>{const r=Kr(n,Ze(t,e));if(r)return r}));return Sr(r,e,i,n,!0)}function Xr(t,e){return ti(e,t.syncPointTree_,null,br(t.pendingWriteTree_,Ue()))}function ti(t,e,n,r){if(Je(t.path))return ei(t,e,n,r);{const i=e.get(Ue());null==n&&null!=i&&(n=Kr(i,Ue()));let o=[];const s=ze(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){const t=n?n.getImmediateChild(s):null,e=Dr(r,s);o=o.concat(ti(a,c,t,e))}return i&&(o=o.concat(Vr(i,t,r,n))),o}}function ei(t,e,n,r){const i=e.get(Ue());null==n&&null!=i&&(n=Kr(i,Ue()));let o=[];return e.children.inorderTraversal(((e,i)=>{const s=n?n.getImmediateChild(e):null,a=Dr(r,e),c=t.operationForChild(e);c&&(o=o.concat(ei(c,i,s,a)))})),i&&(o=o.concat(Vr(i,t,r,n))),o}function ni(t,e){return t.tagToQueryMap.get(e)}function ri(e){const n=e.indexOf("$");return t(-1!==n&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new qe(e.substr(0,n))}}function ii(e,n,r){const i=e.syncPointTree_.get(n);return t(i,"Missing sync point for query tag that we're tracking"),Vr(i,r,br(e.pendingWriteTree_,n),null)}class oi{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new oi(e)}node(){return this.node_}}class si{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Qe(this.path_,t);return new si(this.syncTree_,e)}node(){return Zr(this.syncTree_,this.path_)}}const ai=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},ci=function(e,n,r){return e&&"object"==typeof e?(t(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?ui(e[".sv"],n,r):"object"==typeof e[".sv"]?li(e[".sv"],n):void t(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ui=function(e,n,r){if("timestamp"===e)return r.timestamp;t(!1,"Unexpected server value: "+e)},li=function(e,n,r){e.hasOwnProperty("increment")||t(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&t(!1,"Unexpected increment value: "+i);const o=n.node();if(t(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const s=o.getValue();return"number"!=typeof s?i:s+i},hi=function(t,e,n,r){return di(e,new si(n,t),r)},fi=function(t,e,n){return di(t,new oi(e),n)};function di(t,e,n){const r=t.getPriority().val(),i=ci(r,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const r=t,o=ci(r.getValue(),e,n);return o!==r.getValue()||i!==r.getPriority().val()?new Tn(o,Mn(i)):t}{const r=t;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new Tn(i))),r.forEachChild(Sn,((t,r)=>{const i=di(r,e.getImmediateChild(t),n);i!==r&&(o=o.updateImmediateChild(t,i))})),o}}class pi{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}}function _i(t,e){let n=e instanceof qe?e:new qe(e),r=t,i=ze(n);for(;null!==i;){const t=T(r.node.children,i)||{children:{},childCount:0};r=new pi(i,r,t),n=Ve(n),i=ze(n)}return r}function gi(t){return t.node.value}function mi(t,e){t.node.value=e,Ci(t)}function vi(t){return t.node.childCount>0}function yi(t,e){he(t.node.children,((n,r)=>{e(new pi(n,t,r))}))}function wi(t,e,n,r){n&&!r&&e(t),yi(t,(t=>{wi(t,e,!0,r)})),n&&r&&e(t)}function bi(t){return new qe(null===t.parent?t.name:bi(t.parent)+"/"+t.name)}function Ci(t){null!==t.parent&&function(t,e,n){const r=function(t){return void 0===gi(t)&&!vi(t)}(n),i=I(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ci(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Ci(t))}(t.parent,t.name,t)}const Ii=/[\[\].#$\/\u0000-\u001F\u007F]/,Ti=/[\[\].#$\u0000-\u001F\u007F]/,Si=10485760,Ei=function(t){return"string"==typeof t&&0!==t.length&&!Ii.test(t)},ki=function(t,e,n){const r=n instanceof qe?new en(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+rn(r));if("function"==typeof e)throw new Error(t+"contains a function "+rn(r)+" with contents = "+e.toString());if(re(e))throw new Error(t+"contains "+e.toString()+" "+rn(r));if("string"==typeof e&&e.length>Si/3&&x(e)>Si)throw new Error(t+"contains a string greater than "+Si+" utf8 bytes "+rn(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let n=!1,i=!1;if(he(e,((e,o)=>{if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(i=!0,!Ei(e)))throw new Error(t+" contains an invalid key ("+e+") "+rn(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,a;a=e,(s=r).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(a),s.byteLength_+=x(a),nn(s),ki(t,o,r),function(t){const e=t.parts_.pop();t.byteLength_-=x(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)})),n&&i)throw new Error(t+' contains ".value" child '+rn(r)+" in addition to actual children.")}},Ni=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ei(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),function(t){return"string"==typeof t&&0!==t.length&&!Ti.test(t)}(t)}(n))throw new Error(function(t,e){return`${t} failed: ${e} argument `}(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ri{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xi(t,e,n){(function(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null===n||Xe(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)})(t,n),function(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(Di(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}(t,(t=>tn(t,e)||tn(e,t)))}function Di(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();Qt&&Zt("event: "+n.toString()),_e(r)}}}const Pi=25;class Ai{constructor(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ri,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hn(),this.transactionQueueTree_=new pi,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Oi(t,e,n){if(t.stats_=xe(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Un(t.repoInfo_,((e,n,r,i)=>{Fi(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((()=>ji(t,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{b(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new an(t.repoInfo_,e,((e,n,r,i)=>{Fi(t,e,n,r,i)}),(e=>{ji(t,e)}),(e=>{!function(t,e){he(e,((e,n)=>{$i(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((e=>{t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((e=>{t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=function(e,n){const r=e.toString();return Re[r]||(Re[r]=new Yn(t.stats_,t.server_)),Re[r]}(t.repoInfo_),t.infoData_=new zn,t.infoSyncTree_=new Gr({startListening:(e,n,r,i)=>{let o=[];const s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Jr(t.infoSyncTree_,e._path,s),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),$i(t,"connected",!1),t.serverSyncTree_=new Gr({startListening:(e,n,r,i)=>(t.server_.listen(e,r,n,((n,r)=>{const o=i(n,r);xi(t.eventQueue_,e._path,o)})),[]),stopListening:(e,n)=>{t.server_.unlisten(e,n)}})}function Li(t){const e=t.infoData_.getNode(new qe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Mi(t){return ai({timestamp:Li(t)})}function Fi(t,e,n,r,i){t.dataUpdateCount++;const o=new qe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){const e=E(n,(t=>Mn(t)));s=function(t,e,n,r){const i=ni(t,r);if(i){const r=ri(i),o=r.path,s=r.queryId,a=Ze(o,e),c=ur.fromObject(n);return ii(t,o,new tr(Jn(s),a,c))}return[]}(t.serverSyncTree_,o,e,i)}else{const e=Mn(n);s=function(t,e,n,r){const i=ni(t,r);if(null!=i){const r=ri(i),o=r.path,s=r.queryId,a=Ze(o,e);return ii(t,o,new Xn(Jn(s),a,n))}return[]}(t.serverSyncTree_,o,e,i)}else if(r){const e=E(n,(t=>Mn(t)));s=function(t,e,n){const r=ur.fromObject(n);return Xr(t,new tr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,e)}else{const e=Mn(n);s=Jr(t.serverSyncTree_,o,e)}let a=o;s.length>0&&(a=zi(t,o)),xi(t.eventQueue_,a,s)}function ji(t,e){$i(t,"connected",e),!1===e&&function(t){Bi(t,"onDisconnectEvents");const e=Mi(t),n=Hn();Kn(t.onDisconnect_,Ue(),((r,i)=>{const o=hi(r,i,t.serverSyncTree_,e);Vn(n,r,o)}));let r=[];Kn(n,Ue(),((e,n)=>{r=r.concat(Jr(t.serverSyncTree_,e,n));const i=function(t,e){const n=bi(Hi(t,e)),r=_i(t.transactionQueueTree_,e);return function(t,e,n){let r=void 0?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,(e=>{Yi(t,e)})),Yi(t,r),wi(r,(e=>{Yi(t,e)})),n}(t,e);zi(t,i)})),t.onDisconnect_=Hn(),xi(t.eventQueue_,Ue(),r)}(t)}function $i(t,e,n){const r=new qe("/.info/"+e),i=Mn(n);t.infoData_.updateSnapshot(r,i);const o=Jr(t.infoSyncTree_,r,i);xi(t.eventQueue_,r,o)}function Wi(t){return t.nextWriteId_++}function Bi(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Zt(n,...e)}function qi(t,e,n){return Zr(t.serverSyncTree_,e,n)||An.EMPTY_NODE}function Ui(e,n=e.transactionQueueTree_){if(n||Gi(e,n),gi(n)){const r=Vi(e,n);t(r.length>0,"Sending zero length transaction queue"),r.every((t=>0===t.status))&&function(e,n,r){const i=r.map((t=>t.currentWriteId)),o=qi(e,n,i);let s=o;const a=o.hash();for(let e=0;e<r.length;e++){const i=r[e];t(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;const o=Ze(n,i.path);s=s.updateChild(o,i.currentOutputSnapshotRaw)}const c=s.val(!0),u=n;e.server_.put(u.toString(),c,(t=>{Bi(e,"transaction put response",{path:u.toString(),status:t});let i=[];if("ok"===t){const t=[];for(let n=0;n<r.length;n++)r[n].status=2,i=i.concat(Qr(e.serverSyncTree_,r[n].currentWriteId)),r[n].onComplete&&t.push((()=>r[n].onComplete(null,!0,r[n].currentOutputSnapshotResolved))),r[n].unwatcher();Gi(e,_i(e.transactionQueueTree_,n)),Ui(e,e.transactionQueueTree_),xi(e.eventQueue_,n,i);for(let e=0;e<t.length;e++)_e(t[e])}else{if("datastale"===t)for(let t=0;t<r.length;t++)3===r[t].status?r[t].status=4:r[t].status=0;else{ne("transaction at "+u.toString()+" failed: "+t);for(let e=0;e<r.length;e++)r[e].status=4,r[e].abortReason=t}zi(e,n)}}),a)}(e,bi(n),r)}else vi(n)&&yi(n,(t=>{Ui(e,t)}))}function zi(e,n){const r=Hi(e,n),i=bi(r);return function(e,n,r){if(0===n.length)return;const i=[];let o=[];const s=n.filter((t=>0===t.status)).map((t=>t.currentWriteId));for(let c=0;c<n.length;c++){const u=n[c],l=Ze(r,u.path);let h,f=!1;if(t(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)f=!0,h=u.abortReason,o=o.concat(Qr(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=Pi)f=!0,h="maxretry",o=o.concat(Qr(e.serverSyncTree_,u.currentWriteId,!0));else{const t=qi(e,u.path,s);u.currentInputSnapshot=t;const r=n[c].update(t.val());if(void 0!==r){ki("transaction failed: Data returned ",r,u.path);let n=Mn(r);"object"==typeof r&&null!=r&&I(r,".priority")||(n=n.updatePriority(t.getPriority()));const i=u.currentWriteId,a=Mi(e),c=fi(n,t,a);u.currentOutputSnapshotRaw=n,u.currentOutputSnapshotResolved=c,u.currentWriteId=Wi(e),s.splice(s.indexOf(i),1),o=o.concat(Yr(e.serverSyncTree_,u.path,c,u.currentWriteId,u.applyLocally)),o=o.concat(Qr(e.serverSyncTree_,i,!0))}else f=!0,h="nodata",o=o.concat(Qr(e.serverSyncTree_,u.currentWriteId,!0))}xi(e.eventQueue_,r,o),o=[],f&&(n[c].status=2,a=n[c].unwatcher,setTimeout(a,Math.floor(0)),n[c].onComplete&&("nodata"===h?i.push((()=>n[c].onComplete(null,!1,n[c].currentInputSnapshot))):i.push((()=>n[c].onComplete(new Error(h),!1,null)))))}var a;Gi(e,e.transactionQueueTree_);for(let t=0;t<i.length;t++)_e(i[t]);Ui(e,e.transactionQueueTree_)}(e,Vi(e,r),i),i}function Hi(t,e){let n,r=t.transactionQueueTree_;for(n=ze(e);null!==n&&void 0===gi(r);)r=_i(r,n),n=ze(e=Ve(e));return r}function Vi(t,e){const n=[];return Ki(t,e,n),n.sort(((t,e)=>t.order-e.order)),n}function Ki(t,e,n){const r=gi(e);if(r)for(let t=0;t<r.length;t++)n.push(r[t]);yi(e,(e=>{Ki(t,e,n)}))}function Gi(t,e){const n=gi(e);if(n){let t=0;for(let e=0;e<n.length;e++)2!==n[e].status&&(n[t]=n[e],t++);n.length=t,mi(e,n.length>0?n:void 0)}yi(e,(e=>{Gi(t,e)}))}function Yi(e,n){const r=gi(n);if(r){const i=[];let o=[],s=-1;for(let n=0;n<r.length;n++)3===r[n].status||(1===r[n].status?(t(s===n-1,"All SENT items should be at beginning of queue."),s=n,r[n].status=3,r[n].abortReason="set"):(t(0===r[n].status,"Unexpected transaction status in abort"),r[n].unwatcher(),o=o.concat(Qr(e.serverSyncTree_,r[n].currentWriteId,!0)),r[n].onComplete&&i.push(r[n].onComplete.bind(null,new Error("set"),!1,null))));-1===s?mi(n,void 0):r.length=s+1,xi(e.eventQueue_,bi(n),o);for(let t=0;t<i.length;t++)_e(i[t])}}const Qi=function(t,e){const n=Ji(t),r=n.namespace;"firebase.com"===n.domain&&ee(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ee("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ne("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Se(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new qe(n.pathString)}},Ji=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if("string"==typeof t){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let l=t.indexOf("/");-1===l&&(l=t.length);let h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=function(t){let e="";const n=t.split("/");for(let t=0;t<n.length;t++)if(n[t].length>0){let r=n[t];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}e+="/"+r}return e}(t.substring(l,h)));const f=function(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ne(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(s="https"===a||"wss"===a,c=parseInt(e.substring(u+1),10)):u=e.length;const d=e.slice(0,u);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{const t=e.indexOf(".");r=e.substring(0,t).toLowerCase(),n=e.substring(t+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};class Zi{constructor(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}get key(){return Je(this._path)?null:Ke(this._path)}get ref(){return new Xi(this._repo,this._path)}get _queryIdentifier(){const t=qn(this._queryParams),e=ue(t);return"{}"===e?"default":e}get _queryObject(){return qn(this._queryParams)}isEqual(t){if(!((t=M(t))instanceof Zi))return!1;const e=this._repo===t._repo,n=Xe(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class Xi extends Zi{constructor(t,e){super(t,e,new Wn,!1)}get parent(){const t=Ye(this._path);return null===t?null:new Xi(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}!function(e){t(!zr,"__referenceConstructor has already been defined"),zr=e}(Xi),function(e){t(!Hr,"__referenceConstructor has already been defined"),Hr=e}(Xi);const to={};class eo{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Oi(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xi(this._repo,Ue())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(t,e){const n=to[e];n&&n[t.key]===t||ee(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&ee("Cannot call "+t+" on a deleted database.")}}an.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},an.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},Wt="10.4.0",wt(new F("database",((t,{instanceIdentifier:e})=>function(t,e,n,r,i){let o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||ee("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zt("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s,a,c=Qi(o,i),u=c.repoInfo;"undefined"!=typeof process&&process.env&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(s=!0,o=`http://${a}?ns=${u.namespace}`,c=Qi(o,i),u=c.repoInfo):s=!c.repoInfo.secure;const l=i&&s?new ye(ye.OWNER):new ve(t.name,t.options,e);Ni("Invalid Firebase Database URL",c),Je(c.path)||ee("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(t,e,n,r){let i=to[e.name];i||(i={},to[e.name]=i);let o=i[t.toURLString()];return o&&ee("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ai(t,!1,n,r),i[t.toURLString()]=o,o}(u,t,l,new me(t.name,n));return new eo(h,t)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e)),"PUBLIC").setMultipleInstances(!0)),Et(jt,$t,void 0),Et(jt,$t,"esm2017");const no=(t,e)=>e.some((e=>t instanceof e));let ro,io;const oo=new WeakMap,so=new WeakMap,ao=new WeakMap,co=new WeakMap,uo=new WeakMap;let lo={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return so.get(t);if("objectStoreNames"===e)return t.objectStoreNames||ao.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fo(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function ho(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(io||(io=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(po(this),t),fo(oo.get(this))}:function(...t){return fo(e.apply(po(this),t))}:function(t,...n){const r=e.call(po(this),t,...n);return ao.set(r,t.sort?t.sort():[t]),fo(r)}:(t instanceof IDBTransaction&&function(t){if(so.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{e(),r()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));so.set(t,e)}(t),no(t,ro||(ro=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,lo):t);var e}function fo(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{e(fo(t.result)),r()},o=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)}));return e.then((e=>{e instanceof IDBCursor&&oo.set(e,t)})).catch((()=>{})),uo.set(e,t),e}(t);if(co.has(t))return co.get(t);const e=ho(t);return e!==t&&(co.set(t,e),uo.set(e,t)),e}const po=t=>uo.get(t),_o=["get","getKey","getAll","getAllKeys","count"],go=["put","add","delete","clear"],mo=new Map;function vo(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(mo.get(e))return mo.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=go.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_o.includes(n))return;const o=async function(t,...e){const o=this.transaction(t,i?"readwrite":"readonly");let s=o.store;return r&&(s=s.index(e.shift())),(await Promise.all([s[n](...e),i&&o.done]))[0]};return mo.set(e,o),o}lo=(t=>({...t,get:(e,n,r)=>vo(e,n)||t.get(e,n,r),has:(e,n)=>!!vo(e,n)||t.has(e,n)}))(lo);const yo="@firebase/installations",wo="0.6.4",bo=1e4,Co=`w:${wo}`,Io="FIS_v2",To="https://firebaseinstallations.googleapis.com/v1",So=36e5,Eo=new v("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ko(t){return t instanceof m&&t.code.includes("request-failed")}function No({projectId:t}){return`${To}/projects/${t}/installations`}function Ro(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function xo(t,e){const n=(await e.json()).error;return Eo.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Do({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function Po(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Ao(t){return new Promise((e=>{setTimeout(e,t)}))}const Oo=/^[cdef][\w-]{21}$/,Lo="";function Mo(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){var e;return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(t);return Oo.test(e)?e:Lo}catch(t){return Lo}}function Fo(t){return`${t.appName}!${t.appId}`}const jo=new Map;function $o(t,e){const n=Fo(t);Wo(n,e),function(t,e){const n=(!Bo&&"BroadcastChannel"in self&&(Bo=new BroadcastChannel("[Firebase] FID Change"),Bo.onmessage=t=>{Wo(t.data.key,t.data.fid)}),Bo);n&&n.postMessage({key:t,fid:e}),0===jo.size&&Bo&&(Bo.close(),Bo=null)}(n,e)}function Wo(t,e){const n=jo.get(t);if(n)for(const t of n)t(e)}let Bo=null;const qo="firebase-installations-database",Uo=1,zo="firebase-installations-store";let Ho=null;function Vo(){return Ho||(Ho=function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=fo(s);return r&&s.addEventListener("upgradeneeded",(t=>{r(fo(s.result),t.oldVersion,t.newVersion,fo(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((t=>{o&&t.addEventListener("close",(()=>o())),i&&t.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}(qo,Uo,{upgrade:(t,e)=>{0===e&&t.createObjectStore(zo)}})),Ho}async function Ko(t,e){const n=Fo(t),r=(await Vo()).transaction(zo,"readwrite"),i=r.objectStore(zo),o=await i.get(n);return await i.put(e,n),await r.done,o&&o.fid===e.fid||$o(t,e.fid),e}async function Go(t){const e=Fo(t),n=(await Vo()).transaction(zo,"readwrite");await n.objectStore(zo).delete(e),await n.done}async function Yo(t,e){const n=Fo(t),r=(await Vo()).transaction(zo,"readwrite"),i=r.objectStore(zo),o=await i.get(n),s=e(o);return void 0===s?await i.delete(n):await i.put(s,n),await r.done,!s||o&&o.fid===s.fid||$o(t,s.fid),s}async function Qo(t){let e;const n=await Yo(t.appConfig,(n=>{const r=function(t){return Xo(t||{fid:Mo(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Eo.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=No(t),i=Do(t),o=e.getImmediate({optional:!0});if(o){const t=await o.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const s={fid:n,authVersion:Io,appId:t.appId,sdkVersion:Co},a={method:"POST",headers:i,body:JSON.stringify(s)},c=await Po((()=>fetch(r,a)));if(c.ok){const t=await c.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:Ro(t.authToken)}}throw await xo("Create Installation",c)}(t,e);return Ko(t.appConfig,n)}catch(n){throw ko(n)&&409===n.customData.serverCode?await Go(t.appConfig):await Ko(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Jo(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}));return n.fid===Lo?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Jo(t){let e=await Zo(t.appConfig);for(;1===e.registrationStatus;)await Ao(100),e=await Zo(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await Qo(t);return n||e}return e}function Zo(t){return Yo(t,(t=>{if(!t)throw Eo.create("installation-not-found");return Xo(t)}))}function Xo(t){return 1===(e=t).registrationStatus&&e.registrationTime+bo<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function ts({appConfig:t,heartbeatServiceProvider:e},n){const r=function(t,{fid:e}){return`${No(t)}/${e}/authTokens:generate`}(t,n),i=function(t,{refreshToken:e}){const n=Do(t);return n.append("Authorization",function(t){return`${Io} ${t}`}(e)),n}(t,n),o=e.getImmediate({optional:!0});if(o){const t=await o.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const s={installation:{sdkVersion:Co,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(s)},c=await Po((()=>fetch(r,a)));if(c.ok)return Ro(await c.json());throw await xo("Generate Auth Token",c)}async function es(t,e=!1){let n;const r=await Yo(t.appConfig,(r=>{if(!rs(r))throw Eo.create("not-registered");const i=r.authToken;if(!e&&(2===(o=i).requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+So}(o)))return r;var o;if(1===i.requestStatus)return n=async function(t,e){let n=await ns(t.appConfig);for(;1===n.authToken.requestStatus;)await Ao(100),n=await ns(t.appConfig);const r=n.authToken;return 0===r.requestStatus?es(t,e):r}(t,e),r;{if(!navigator.onLine)throw Eo.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(r);return n=async function(t,e){try{const n=await ts(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Ko(t.appConfig,r),n}catch(n){if(!ko(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ko(t.appConfig,n)}else await Go(t.appConfig);throw n}}(t,e),e}}));return n?await n:r.authToken}function ns(t){return Yo(t,(t=>{if(!rs(t))throw Eo.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+bo<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e}))}function rs(t){return void 0!==t&&2===t.registrationStatus}function is(t){return Eo.create("missing-app-config-values",{valueName:t})}const os="installations";wt(new F(os,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw is("App Configuration");if(!t.name)throw is("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw is(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:bt(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),wt(new F("installations-internal",(t=>{const e=bt(t.getProvider("app").getImmediate(),os).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:r}=await Qo(e);return r?r.catch(console.error):es(e).catch(console.error),n.fid}(e),getToken:t=>async function(t,e=!1){const n=t;return await async function(t){const{registrationPromise:e}=await Qo(t);e&&await e}(n),(await es(n,e)).token}(e,t)}}),"PRIVATE")),Et(yo,wo),Et(yo,wo,"esm2017");const ss="analytics",as="firebase_id",cs="origin",us=6e4,ls="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hs="https://www.googletagmanager.com/gtag/js",fs=new K("@firebase/analytics"),ds=new v("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ps(t){if(!t.startsWith(hs)){const e=ds.create("invalid-gtag-resource",{gtagURL:t});return fs.warn(e.message),""}return t}function _s(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}const gs=30,ms=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function vs(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ys(t,e=ms,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw ds.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw ds.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new bs;return setTimeout((async()=>{a.abort()}),void 0!==n?n:us),ws({appId:r,apiKey:i,measurementId:o},s,a,e)}async function ws(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=ms){var o;const{appId:s,measurementId:a}=t;try{await function(t,e){return new Promise(((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((()=>{clearTimeout(o),r(ds.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(r,e)}catch(t){if(a)return fs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:s,measurementId:a};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:vs(r)},o=ls.replace("{app-id}",n),s=await fetch(o,i);if(200!==s.status&&304!==s.status){let t="";try{const n=await s.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw ds.create("config-fetch-failed",{httpStatus:s.status,responseMessage:t})}return s.json()}(t);return i.deleteThrottleMetadata(s),e}catch(e){const c=e;if(!function(t){if(!(t instanceof m&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(s),a)return fs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:s,measurementId:a};throw e}const u=503===Number(null===(o=null==c?void 0:c.customData)||void 0===o?void 0:o.httpStatus)?L(n,i.intervalMillis,gs):L(n,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(s,l),fs.debug(`Calling attemptFetch again in ${u} millis`),ws(t,l,r,i)}}class bs{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let Cs,Is;async function Ts(t,e,n,r,i,o,s){var a;const c=ys(t);c.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&fs.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>fs.error(t))),e.push(c);const u=async function(){if(!_())return fs.warn(ds.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await g()}catch(t){return fs.warn(ds.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?r.getId():void 0)),[l,h]=await Promise.all([c,u]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(hs)&&n.src.includes(t))return n;return null})(o)||function(t,e){const n=function(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",e)),n}(0,{createScriptURL:ps}),r=document.createElement("script"),i=`${hs}?l=${t}&id=${e}`;r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(o,l.measurementId),Is&&(i("consent","default",Is),Is=void 0),i("js",new Date);const f=null!==(a=null==s?void 0:s.config)&&void 0!==a?a:{};return f[cs]="firebase",f.update=!0,null!=h&&(f[as]=h),i("config",l.measurementId,f),Cs&&(i("set",Cs),Cs=void 0),l.measurementId}class Ss{constructor(t){this.app=t}_delete(){return delete Es[this.app.options.appId],Promise.resolve()}}let Es={},ks=[];const Ns={};let Rs,xs,Ds="dataLayer",Ps=!1;function As(t,e,n){!function(){const t=[];if(function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=ds.create("invalid-analytics-context",{errorInfo:e});fs.warn(n.message)}}();const r=t.options.appId;if(!r)throw ds.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw ds.create("no-api-key");fs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Es[r])throw ds.create("already-exists",{id:r});if(!Ps){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Ds);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,r,i){let o=function(...t){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return async function(i,...o){try{if("event"===i){const[r,i]=o;await async function(t,e,n,r,i){try{let o=[];if(i&&i.send_to){let t=i.send_to;Array.isArray(t)||(t=[t]);const r=await _s(n);for(const n of t){const t=r.find((t=>t.measurementId===n)),i=t&&e[t.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(e)),await Promise.all(o),t("event",r,i||{})}catch(t){fs.error(t)}}(t,e,n,r,i)}else if("config"===i){const[i,s]=o;await async function(t,e,n,r,i,o){const s=r[i];try{if(s)await e[s];else{const t=(await _s(n)).find((t=>t.measurementId===i));t&&await e[t.appId]}}catch(t){fs.error(t)}t("config",i,o)}(t,e,n,r,i,s)}else if("consent"===i){const[e]=o;t("consent","update",e)}else if("get"===i){const[e,n,r]=o;t("get",e,n,r)}else if("set"===i){const[e]=o;t("set",e)}else t(i,...o)}catch(t){fs.error(t)}}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(Es,ks,Ns,Ds,"gtag");xs=t,Rs=e,Ps=!0}return Es[r]=Ts(t,ks,Ns,e,Rs,Ds,n),new Ss(t)}const Os="@firebase/analytics",Ls="0.10.0";wt(new F(ss,((t,{options:e})=>As(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),wt(new F("analytics-internal",(function(t){try{const e=t.getProvider(ss).getImmediate();return{logEvent:(t,n,r)=>function(t,e,n,r){t=M(t),async function(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const i=await e;t("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(xs,Es[t.app.options.appId],e,n,r).catch((t=>fs.error(t)))}(e,t,n,r)}}catch(t){throw ds.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),Et(Os,Ls),Et(Os,Ls,"esm2017");const Ms=Tt({apiKey:"AIzaSyCVEridJKO2vwHMAwD7SieDc1BA-W9Tys4",authDomain:"my-way-yacht.firebaseapp.com",databaseURL:"https://my-way-yacht-default-rtdb.firebaseio.com",projectId:"my-way-yacht",storageBucket:"my-way-yacht.appspot.com",messagingSenderId:"682998640889",appId:"1:682998640889:web:dc6d9610316b6926a2f228",measurementId:"G-B97V4WDN4Q"}),Fs=function(t=St(),e){const n=bt(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=h())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})("database");t&&function(t,e,n,r={}){(t=M(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&ee("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ee('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ye(ye.OWNER);else if(r.mockUserToken){const e="string"==typeof r.mockUserToken?r.mockUserToken:function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(o)),""].join(".")}(r.mockUserToken,t.app.options.projectId);o=new ye(e)}!function(t,e,n,r){t.repoInfo_=new Se(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,o)}(n,...t)}return n}(Ms),js=Fs.ref("my-way-yacht-default-rtdb/data");console.log(js),function(t=St()){const e=bt(t=M(t),ss);e.isInitialized()?e.getImmediate():function(t,e={}){const n=bt(t,ss);if(n.isInitialized()){const t=n.getImmediate();if(k(e,n.getOptions()))return t;throw ds.create("already-initialized")}n.initialize({options:e})}(t)}(Ms),console.log(Fs),console.log(dates),console.log(crewRef);const $s=t=>{let e=0;for(const n in t.crew)null!==t.crew[n].name&&""!==t.crew[n].name.trim()&&e++;return e};window.addEventListener("DOMContentLoaded",(function(){Fs.forEach((t=>{const e=function(t){return`\n        <div class = "day">\n            <p class = "date">${t.date}</p>\n            <p class = "slot">${t.slot}</p>\n            <p class = "event">${t.event}</p>\n            <table id = "crew-${t.date}">\n                <tr class = "header">\n                    <td>Crew</td>\n                    <td>Guest of</td> \n                </tr>\n                ${t.crew.person1.name?`<tr class = "person1">\n                    <td class = "name">${t.crew.person1.name}</td>\n                    <td class = "guestOf">${t.crew.person1.guestOf}</td>\n                </tr>`:""}\n                ${t.crew.person2.name?`<tr class = "person">\n                    <td class = "name">${t.crew.person2.name}</td>\n                    <td class = "guestOf">${t.crew.person2.guestOf}</td>\n                </tr>`:""}\n                ${t.crew.person3.name?`<tr class = "person">\n                    <td class = "name">${t.crew.person3.name}</td>\n                    <td class = "guestOf">${t.crew.person3.guestOf}</td>\n                </tr>`:""}\n                ${t.crew.person4.name?`<tr class = "person">\n                    <td class = "name">${t.crew.person4.name}</td>\n                    <td class = "guestOf">${t.crew.person4.guestOf}</td>\n                </tr>`:""}\n                ${t.crew.person5.name?`<tr class = "person">\n                    <td class = "name">${t.crew.person5.name}</td>\n                    <td class = "guestOf">${t.crew.person5.guestOf}</td>\n                </tr>`:""}\n                ${t.crew.person6.name?`<tr class = "person">\n                    <td class = "name">${t.crew.person6.name}</td>\n                    <td class = "guestOf">${t.crew.person6.guestOf}</td>\n                </tr>`:""}\n                ${t.crew.person7.name?`<tr class = "person">\n                    <td class = "name">${t.crew.person7.name}</td>\n                    <td class = "guestOf">${t.crew.person7.guestOf}</td>\n                </tr>`:""}\n                ${t.crew.person8.name?`<tr class = "person">\n                    <td class = "name">${t.crew.person8.name}</td>\n                    <td class = "guestOf">${t.crew.person8.guestOf}</td> \n                </tr>`:""}\n                ${t.crew.person9.name?`<tr class = "person">\n                    <td class = "name">${t.crew.person9.name}</td>\n                    <td class = "guestOf">${t.crew.person9.guestOf}</td>\n                </tr>`:""}\n                ${t.crew.person10.name?`<tr class = "person">\n                    <td class = "name">${t.crew.person10.name}</td>\n                    <td class = "guestOf">${t.crew.person10.guestOf}</td>\n                </tr>`:""}\n                ${t.crew.person11.name?`<tr class = "person">\n                    <td class = "name">${t.crew.person11.name}</td>\n                    <td class = "guestOf">${t.crew.person11.guestOf}</td>\n                </tr>`:""}\n                ${t.crew.person12.name?`<tr class = "person">\n                    <td class = "name">${t.crew.person12.name}</td>\n                    <td class = "guestOf">${t.crew.person12.guestOf}</td>\n                </tr>`:""}\n            </table>\n            <p>${$s(t)}/12 people</p>\n            <input type="text" id="nameInput-${t.date}" placeholder="New name">\n            <input type="text" id="guestOfInput-${t.date}" placeholder="Guest of...">\n            <input type="text" id="phoneInput-${t.date}" placeholder="Phone number">\n            <button onclick="addName()">Add Name</button>  \n        </div>\n    `}(t);document.getElementById("expeditions").innerHTML+=e}))}))})()})();